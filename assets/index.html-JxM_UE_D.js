import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as t,b as o,a as n,d as s}from"./app-EVybbKqM.js";const p={},c=o(`<blockquote><p>Vue2 获取文件上下文方法是 <code>require.context(&#39;../views/components&#39;, true, /\\.vue/)</code></p><p>Vue3 获取文件上下文方法是 <code>import.meta.glob(&#39;../views/components/*.vue&#39;)</code></p></blockquote><h3 id="上下文全局挂载组件" tabindex="-1"><a class="header-anchor" href="#上下文全局挂载组件"><span>上下文全局挂载组件</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token comment">// 自定义组件</span>
<span class="token keyword">const</span> requireComponents <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&#39;../views/components&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
<span class="token comment">// 打印结果</span>
<span class="token comment">// 遍历出每个组件的路径</span>
requireComponents<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 组件实例</span>
  <span class="token keyword">const</span> reqCom <span class="token operator">=</span> <span class="token function">requireComponents</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
  <span class="token comment">// 截取路径作为组件名</span>
  <span class="token keyword">const</span> reqComName <span class="token operator">=</span> reqCom<span class="token punctuation">.</span>name<span class="token operator">||</span> fileName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.\\/(.*)\\.vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">&#39;$1&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// 组件挂载</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>reqComName<span class="token punctuation">,</span> reqCom<span class="token punctuation">.</span>default <span class="token operator">||</span> reqCom<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="上下文注册路由" tabindex="-1"><a class="header-anchor" href="#上下文注册路由"><span>上下文注册路由</span></a></h3>`,4),l=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{js:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 寻找views文件夹中的所有的page.js"),s(`
`),n("span",{class:"token keyword"},"const"),s(" pages "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"."),s("meta"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"glob"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'../views/**/page.js'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"eager"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'default'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token comment"},"// 寻找所有组件，为后期component做准备"),s(`
`),n("span",{class:"token keyword"},"const"),s(" pageComps "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"."),s("meta"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"glob"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'../views/**/index.vue'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"eager"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"const"),s(" routes "),n("span",{class:"token operator"},"="),s(" Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"entries"),n("span",{class:"token punctuation"},"("),s("pages"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token punctuation"},"["),s("path"),n("span",{class:"token punctuation"},","),s(" meta"),n("span",{class:"token punctuation"},"]")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  path `),n("span",{class:"token operator"},"="),s(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'../views'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/page.js'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},")"),s(`
  path `),n("span",{class:"token operator"},"="),s(" path "),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"'/'"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" name "),n("span",{class:"token operator"},"="),s(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"split"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"filter"),n("span",{class:"token punctuation"},"("),s("Boolean"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'-'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"'index'"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
    path`),n("span",{class:"token punctuation"},","),s(`
    name`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// component: () => import(''), "),s(`
    meta
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" router "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createRouter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"history"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"createWebHistory"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  routes
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),i=[c,l];function u(r,k){return e(),t("div",null,i)}const g=a(p,[["render",u],["__file","index.html.vue"]]),v=JSON.parse(`{"path":"/Tips/Vue/UseContextLoad/","title":"Vue上下文生成器","lang":"zh-CN","frontmatter":{"title":"Vue上下文生成器","lang":"zh-CN","date":"2025-05-24T15:49:31.000Z","permalink":"/Tips/Vue/UseContextLoad/","description":"Vue2 获取文件上下文方法是 require.context('../views/components', true, /\\\\.vue/) Vue3 获取文件上下文方法是 import.meta.glob('../views/components/*.vue') 上下文全局挂载组件 上下文注册路由","head":[["meta",{"property":"og:url","content":"https://shaohui-jin.github.io/my-blog/Tips/Vue/UseContextLoad/"}],["meta",{"property":"og:title","content":"Vue上下文生成器"}],["meta",{"property":"og:description","content":"Vue2 获取文件上下文方法是 require.context('../views/components', true, /\\\\.vue/) Vue3 获取文件上下文方法是 import.meta.glob('../views/components/*.vue') 上下文全局挂载组件 上下文注册路由"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-24T08:48:59.000Z"}],["meta",{"property":"article:author","content":"石怜安"}],["meta",{"property":"article:published_time","content":"2025-05-24T15:49:31.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-24T08:48:59.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Vue上下文生成器\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-05-24T15:49:31.000Z\\",\\"dateModified\\":\\"2025-05-24T08:48:59.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"石怜安\\",\\"url\\":\\"https://shaohui-jin.github.io\\"}]}"]]},"headers":[{"level":3,"title":"上下文全局挂载组件","slug":"上下文全局挂载组件","link":"#上下文全局挂载组件","children":[]},{"level":3,"title":"上下文注册路由","slug":"上下文注册路由","link":"#上下文注册路由","children":[]}],"git":{"createdTime":1748076539000,"updatedTime":1748076539000,"contributors":[{"name":"shaohui_jin","email":"1051131737@qq.com","commits":1}]},"readingTime":{"minutes":0.75,"words":226},"filePathRelative":"zh/代码仓/Vue上下文生成器.md","localizedDate":"2025年5月24日","excerpt":"<blockquote>\\n<p>Vue2 获取文件上下文方法是 <code>require.context('../views/components', true, /\\\\.vue/)</code></p>\\n<p>Vue3 获取文件上下文方法是 <code>import.meta.glob('../views/components/*.vue')</code></p>\\n</blockquote>\\n<h3>上下文全局挂载组件</h3>\\n<div class=\\"language-javascript\\" data-ext=\\"js\\" data-title=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token keyword\\">import</span> Vue <span class=\\"token keyword\\">from</span> <span class=\\"token string\\">'vue'</span>\\n<span class=\\"token comment\\">// 自定义组件</span>\\n<span class=\\"token keyword\\">const</span> requireComponents <span class=\\"token operator\\">=</span> require<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">context</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'../views/components'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token boolean\\">true</span><span class=\\"token punctuation\\">,</span> <span class=\\"token regex\\"><span class=\\"token regex-delimiter\\">/</span><span class=\\"token regex-source language-regex\\">\\\\.vue</span><span class=\\"token regex-delimiter\\">/</span></span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token comment\\">// 打印结果</span>\\n<span class=\\"token comment\\">// 遍历出每个组件的路径</span>\\nrequireComponents<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">keys</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forEach</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">fileName</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n  <span class=\\"token comment\\">// 组件实例</span>\\n  <span class=\\"token keyword\\">const</span> reqCom <span class=\\"token operator\\">=</span> <span class=\\"token function\\">requireComponents</span><span class=\\"token punctuation\\">(</span>fileName<span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token comment\\">// 截取路径作为组件名</span>\\n  <span class=\\"token keyword\\">const</span> reqComName <span class=\\"token operator\\">=</span> reqCom<span class=\\"token punctuation\\">.</span>name<span class=\\"token operator\\">||</span> fileName<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">replace</span><span class=\\"token punctuation\\">(</span><span class=\\"token regex\\"><span class=\\"token regex-delimiter\\">/</span><span class=\\"token regex-source language-regex\\">\\\\.\\\\/(.*)\\\\.vue</span><span class=\\"token regex-delimiter\\">/</span></span><span class=\\"token punctuation\\">,</span><span class=\\"token string\\">'$1'</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token comment\\">// 组件挂载</span>\\n  Vue<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">component</span><span class=\\"token punctuation\\">(</span>reqComName<span class=\\"token punctuation\\">,</span> reqCom<span class=\\"token punctuation\\">.</span>default <span class=\\"token operator\\">||</span> reqCom<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n</code></pre></div>","autoDesc":true}`);export{g as comp,v as data};
