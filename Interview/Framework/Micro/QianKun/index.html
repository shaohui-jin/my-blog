<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.8" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.30" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://shaohui-jin.github.io/Interview/Framework/Micro/QianKun/"><meta property="og:title" content="ä¹¾å¤"><meta property="og:description" content="å¾®å‰ç«¯ æ˜¯ä¸€ç§ç±»ä¼¼äºå¾®æœåŠ¡çš„æ¶æ„ï¼Œå®ƒå°†å¾®æœåŠ¡çš„ç†å¿µåº”ç”¨äºæµè§ˆå™¨ç«¯ï¼Œå³å°†å•é¡µé¢å‰ç«¯åº”ç”¨ç”±å•ä¸€çš„å•ä½“åº”ç”¨è½¬å˜ä¸ºå¤šä¸ªå°å‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€çš„åº”ç”¨ã€‚ å„ä¸ªå‰ç«¯åº”ç”¨è¿˜å¯ä»¥ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€‚åŒæ—¶ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥åœ¨å…±äº«ç»„ä»¶çš„åŒæ—¶è¿›è¡Œå¹¶è¡Œå¼€å‘â€”â€”è¿™äº›ç»„ä»¶å¯ä»¥é€šè¿‡ NPM æˆ–è€… Git Tagã€Git Submodule æ¥ç®¡ç†ã€‚ qiankunï¼ˆä¹¾å¤ï¼‰ å°±æ˜¯ä¸€æ¬¾ç”±èš‚èšé‡‘æœ..."><meta property="og:type" content="article"><meta property="og:image" content="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/microInfo.67x82jqpvk.webp " " =800x"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-03-22T10:36:45.000Z"><meta property="article:author" content="çŸ³æ€œå®‰"><meta property="article:tag" content="å¾®å‰ç«¯"><meta property="article:published_time" content="2022-05-16T11:21:30.000Z"><meta property="article:modified_time" content="2024-03-22T10:36:45.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ä¹¾å¤","image":["https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/microInfo.67x82jqpvk.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/start.3ye7j25zgr.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/registerMicroApps.lvhoopf3k.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/flow.41xtgrz232.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/importHtmlEntry.1e8d6f60rn.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/entry.4n7h32tidg.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/entryDetail.3ye7j25zd3.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/execScripts.7awxdfmjpm.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxyLastOptions.4qr30sml5z.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/render.45g03o1is.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mountedApp.lvhoopf2i.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandbox.2krof0uxch.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandboxDetail.231mqftjrp.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/legacySandbox.5c0qn3h1ew.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandboxProxy.39kxz1igd6.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/legacySandboxActive.ibvqywcbv.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/legacySandboxFlow.wibhu4n72.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxySandbox.1ov6zkl8yx.webp \" \" =600x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxySandboxProxy.4911c7l7la.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxySandboxFlow.6pn9r4s3hm.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/snapshotSandbox.92pw8c5won.webp \" \" =x600","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/snapshotSandboxActive.2obacqo05e.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/snapshotSandboxFlow.6f0fxzcvd3.webp \" \" =x600","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandbox.2krof0uxch.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount.4xuaw88qki.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchAtMounting.54xirnuw0c.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchTimer-patch.839sv635id.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchTimer-free.3ye7j25zfl.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchTimer-setInterval-log.6ik1vp5y1y.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-patch.3k7rs6xok7.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-style.3ye7j25zfi.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-dynamicStyleSheetElements.39kxz1igen.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-script.231mqftjto.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-free.1ov6zkl8yb.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount.4xuaw88qki.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/unmount.3raznmju19.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/sandboxLifeCycle.2krof0uxfa.webp \" \" =x600","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycles.8z6aamctxa.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/registerMicroAppsLoading.6pn9r4s3hu.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/getAddOn.4ckn9xea8u.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/isInContainer.2ruwagh2sl.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/beforeLoad.5mnkg8w9j0.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxyLastOptions.4qr30sml5z.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/beforeMountFlow.3nrdpwqr7k.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount1.8vmocwjr7p.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mountedApp.lvhoopf2i.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount2.9dcq1hl4so.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-mount.9dcq1hl4s9.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/unmount1.6t6voul68g.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-unmount.4jnv5d0fp9.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-flow.2obacqo035.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/deleteProperty.2dogjl8rwi.webp \" \" =800x","https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-info.5c0qn3h1fa.webp \" \" =800x"],"datePublished":"2022-05-16T11:21:30.000Z","dateModified":"2024-03-22T10:36:45.000Z","author":[{"@type":"Person","name":"çŸ³æ€œå®‰","url":"https://shaohui-jin.github.io"}]}</script><link rel="javascript" href="https://cdn.bootcdn.net/ajax/libs/view-design/4.7.0/iview.js"><meta name="baidu-site-verification" content="nGf5yi0Gec"><link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#5c92d1"><title>ä¹¾å¤</title><meta name="description" content="å¾®å‰ç«¯ æ˜¯ä¸€ç§ç±»ä¼¼äºå¾®æœåŠ¡çš„æ¶æ„ï¼Œå®ƒå°†å¾®æœåŠ¡çš„ç†å¿µåº”ç”¨äºæµè§ˆå™¨ç«¯ï¼Œå³å°†å•é¡µé¢å‰ç«¯åº”ç”¨ç”±å•ä¸€çš„å•ä½“åº”ç”¨è½¬å˜ä¸ºå¤šä¸ªå°å‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€çš„åº”ç”¨ã€‚ å„ä¸ªå‰ç«¯åº”ç”¨è¿˜å¯ä»¥ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€‚åŒæ—¶ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥åœ¨å…±äº«ç»„ä»¶çš„åŒæ—¶è¿›è¡Œå¹¶è¡Œå¼€å‘â€”â€”è¿™äº›ç»„ä»¶å¯ä»¥é€šè¿‡ NPM æˆ–è€… Git Tagã€Git Submodule æ¥ç®¡ç†ã€‚ qiankunï¼ˆä¹¾å¤ï¼‰ å°±æ˜¯ä¸€æ¬¾ç”±èš‚èšé‡‘æœ...">
    <link rel="preload" href="/assets/style-B9JRhlV7.css" as="style"><link rel="stylesheet" href="/assets/style-B9JRhlV7.css">
    <link rel="modulepreload" href="/assets/app-CFXHzI0x.js"><link rel="modulepreload" href="/assets/index.html-CQlwoxnz.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CWyEWSl8.js" as="script"><link rel="prefetch" href="/assets/intro.html-CMO0d-Z4.js" as="script"><link rel="prefetch" href="/assets/index.html-DA5t2KKH.js" as="script"><link rel="prefetch" href="/assets/index.html-C1MY42fo.js" as="script"><link rel="prefetch" href="/assets/index.html-B4WTfWoc.js" as="script"><link rel="prefetch" href="/assets/index.html-BhLmTXH-.js" as="script"><link rel="prefetch" href="/assets/index.html-6CkIboZn.js" as="script"><link rel="prefetch" href="/assets/index.html-DR-W8_gd.js" as="script"><link rel="prefetch" href="/assets/index.html-D6Dq168X.js" as="script"><link rel="prefetch" href="/assets/index.html-5ldwkS-h.js" as="script"><link rel="prefetch" href="/assets/index.html-0z5D0EOc.js" as="script"><link rel="prefetch" href="/assets/index.html-DtP3yO-k.js" as="script"><link rel="prefetch" href="/assets/index.html-C1nEH7qY.js" as="script"><link rel="prefetch" href="/assets/index.html-B6nb6Sil.js" as="script"><link rel="prefetch" href="/assets/index.html-C7HtMVXo.js" as="script"><link rel="prefetch" href="/assets/index.html-9a8gAM9M.js" as="script"><link rel="prefetch" href="/assets/index.html--ASSyZAX.js" as="script"><link rel="prefetch" href="/assets/index.html-CVdogg5H.js" as="script"><link rel="prefetch" href="/assets/index.html-DvySSAf-.js" as="script"><link rel="prefetch" href="/assets/index.html-nyA2fGsT.js" as="script"><link rel="prefetch" href="/assets/index.html-D8m1Vb9_.js" as="script"><link rel="prefetch" href="/assets/index.html-L3V2UePf.js" as="script"><link rel="prefetch" href="/assets/index.html-XSMicJXQ.js" as="script"><link rel="prefetch" href="/assets/index.html-MEB1RARx.js" as="script"><link rel="prefetch" href="/assets/index.html-CWOnC5fS.js" as="script"><link rel="prefetch" href="/assets/index.html-BaVyJN1B.js" as="script"><link rel="prefetch" href="/assets/index.html-DJFAtntk.js" as="script"><link rel="prefetch" href="/assets/StreamerButton.html-BUg-UPcr.js" as="script"><link rel="prefetch" href="/assets/index.html-B89g7MRT.js" as="script"><link rel="prefetch" href="/assets/index.html-CU4g8LP7.js" as="script"><link rel="prefetch" href="/assets/index.html-5P4WkKBF.js" as="script"><link rel="prefetch" href="/assets/index.html-qFux3FSU.js" as="script"><link rel="prefetch" href="/assets/index.html-vwJi7aR7.js" as="script"><link rel="prefetch" href="/assets/index.html-CWnl-mXe.js" as="script"><link rel="prefetch" href="/assets/index.html-DRW2maok.js" as="script"><link rel="prefetch" href="/assets/index.html-CVeyi_Xn.js" as="script"><link rel="prefetch" href="/assets/index.html-sfc9aXLT.js" as="script"><link rel="prefetch" href="/assets/index.html-DnIC5nEa.js" as="script"><link rel="prefetch" href="/assets/index.html-BzV8XrgN.js" as="script"><link rel="prefetch" href="/assets/index.html-DIcGm_7W.js" as="script"><link rel="prefetch" href="/assets/index.html-vklN9XQG.js" as="script"><link rel="prefetch" href="/assets/index.html-Dw-YekiA.js" as="script"><link rel="prefetch" href="/assets/index.html-ObAQj_1y.js" as="script"><link rel="prefetch" href="/assets/index.html-CNBY8mdB.js" as="script"><link rel="prefetch" href="/assets/index.html-DMYtTGuB.js" as="script"><link rel="prefetch" href="/assets/index.html-DRbKGk7D.js" as="script"><link rel="prefetch" href="/assets/index.html-DMFzUnmn.js" as="script"><link rel="prefetch" href="/assets/index.html-CmySAd6z.js" as="script"><link rel="prefetch" href="/assets/index.html-CdXnWNZQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CKvCDVkI.js" as="script"><link rel="prefetch" href="/assets/index.html-BQ5wHPy1.js" as="script"><link rel="prefetch" href="/assets/index.html-yKFEZZL7.js" as="script"><link rel="prefetch" href="/assets/index.html-CvrQ8yy6.js" as="script"><link rel="prefetch" href="/assets/index.html-CV06YvVy.js" as="script"><link rel="prefetch" href="/assets/index.html-B9JgKK0i.js" as="script"><link rel="prefetch" href="/assets/index.html-2rd8hcmd.js" as="script"><link rel="prefetch" href="/assets/index.html-Bk_fZk1W.js" as="script"><link rel="prefetch" href="/assets/index.html-DdFj45_T.js" as="script"><link rel="prefetch" href="/assets/index.html-DV-lAEzJ.js" as="script"><link rel="prefetch" href="/assets/index.html-D14s7gbX.js" as="script"><link rel="prefetch" href="/assets/index.html-DoSm7uqG.js" as="script"><link rel="prefetch" href="/assets/index.html-yEp3uue3.js" as="script"><link rel="prefetch" href="/assets/index.html-DybMFyyf.js" as="script"><link rel="prefetch" href="/assets/404.html-C2zL_KuB.js" as="script"><link rel="prefetch" href="/assets/index.html-BH0-M-hU.js" as="script"><link rel="prefetch" href="/assets/index.html-CIFGLGKJ.js" as="script"><link rel="prefetch" href="/assets/index.html-zFcaMljh.js" as="script"><link rel="prefetch" href="/assets/index.html-MN9-4rQP.js" as="script"><link rel="prefetch" href="/assets/index.html-xpi20xAN.js" as="script"><link rel="prefetch" href="/assets/index.html-BRP9RMNh.js" as="script"><link rel="prefetch" href="/assets/index.html-DYiIWb9S.js" as="script"><link rel="prefetch" href="/assets/index.html-B9d8zMO7.js" as="script"><link rel="prefetch" href="/assets/index.html-CC2Alk1a.js" as="script"><link rel="prefetch" href="/assets/index.html-DRorvVC0.js" as="script"><link rel="prefetch" href="/assets/index.html-CR67E3Bb.js" as="script"><link rel="prefetch" href="/assets/index.html-Dt40yH5M.js" as="script"><link rel="prefetch" href="/assets/index.html-BpVpwKTa.js" as="script"><link rel="prefetch" href="/assets/index.html-CA-afNEn.js" as="script"><link rel="prefetch" href="/assets/index.html-ChL3Qbp3.js" as="script"><link rel="prefetch" href="/assets/index.html-MAZxbOnJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BxP_-kv_.js" as="script"><link rel="prefetch" href="/assets/index.html-D0_vLEQU.js" as="script"><link rel="prefetch" href="/assets/index.html-DJd14zPk.js" as="script"><link rel="prefetch" href="/assets/index.html-Dnd11SEp.js" as="script"><link rel="prefetch" href="/assets/index.html-TEJL0bdu.js" as="script"><link rel="prefetch" href="/assets/index.html-BoZF_CV-.js" as="script"><link rel="prefetch" href="/assets/index.html-Dd3B1FDv.js" as="script"><link rel="prefetch" href="/assets/index.html-Diz-hBQZ.js" as="script"><link rel="prefetch" href="/assets/index.html-qUxoQkPK.js" as="script"><link rel="prefetch" href="/assets/index.html-5FQ4GoBr.js" as="script"><link rel="prefetch" href="/assets/index.html-DlvOdUMy.js" as="script"><link rel="prefetch" href="/assets/index.html-DyTPrt15.js" as="script"><link rel="prefetch" href="/assets/index.html-DsdJVmDn.js" as="script"><link rel="prefetch" href="/assets/index.html-DG58rDiL.js" as="script"><link rel="prefetch" href="/assets/index.html-nBcoXwYr.js" as="script"><link rel="prefetch" href="/assets/index.html-7QXv8D21.js" as="script"><link rel="prefetch" href="/assets/index.html-Dk1Alf48.js" as="script"><link rel="prefetch" href="/assets/index.html-BBexGSfV.js" as="script"><link rel="prefetch" href="/assets/index.html-CfuOEwNl.js" as="script"><link rel="prefetch" href="/assets/index.html-BSvgR6kz.js" as="script"><link rel="prefetch" href="/assets/index.html-DN8JW0Pc.js" as="script"><link rel="prefetch" href="/assets/index.html-C5XbMhM4.js" as="script"><link rel="prefetch" href="/assets/index.html-CVKwPOgr.js" as="script"><link rel="prefetch" href="/assets/index.html-BQKMuq9e.js" as="script"><link rel="prefetch" href="/assets/index.html-DIo2DpYP.js" as="script"><link rel="prefetch" href="/assets/index.html-ug8Jr7J-.js" as="script"><link rel="prefetch" href="/assets/index.html-CdXkc6hd.js" as="script"><link rel="prefetch" href="/assets/index.html-mUl_DXkf.js" as="script"><link rel="prefetch" href="/assets/index.html-CSGTAqkT.js" as="script"><link rel="prefetch" href="/assets/index.html-CC0Dl1OX.js" as="script"><link rel="prefetch" href="/assets/index.html-BGNQqTlf.js" as="script"><link rel="prefetch" href="/assets/index.html-0Xe0my3O.js" as="script"><link rel="prefetch" href="/assets/index.html-qGd6iyre.js" as="script"><link rel="prefetch" href="/assets/index.html-Sn2ThZwG.js" as="script"><link rel="prefetch" href="/assets/index.html-BpwmcCu4.js" as="script"><link rel="prefetch" href="/assets/index.html-C9R0KuPt.js" as="script"><link rel="prefetch" href="/assets/index.html-COvxxFVJ.js" as="script"><link rel="prefetch" href="/assets/index.html-4rQ9cVDm.js" as="script"><link rel="prefetch" href="/assets/index.html-psUI1sCU.js" as="script"><link rel="prefetch" href="/assets/index.html-Bijb5RX1.js" as="script"><link rel="prefetch" href="/assets/index.html-DfppKk-i.js" as="script"><link rel="prefetch" href="/assets/index.html-5k5GdWE0.js" as="script"><link rel="prefetch" href="/assets/index.html-CrHYYUxP.js" as="script"><link rel="prefetch" href="/assets/index.html-BazuElKx.js" as="script"><link rel="prefetch" href="/assets/index.html-DSjABdIe.js" as="script"><link rel="prefetch" href="/assets/index.html-C-I1IRPK.js" as="script"><link rel="prefetch" href="/assets/index.html-C-VIHfkJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DZfa_JQH.js" as="script"><link rel="prefetch" href="/assets/index.html-DfHewCRw.js" as="script"><link rel="prefetch" href="/assets/index.html-Cch3mM-2.js" as="script"><link rel="prefetch" href="/assets/index.html-D-CqoXBD.js" as="script"><link rel="prefetch" href="/assets/index.html-DKcGxyOm.js" as="script"><link rel="prefetch" href="/assets/index.html-DisPdA93.js" as="script"><link rel="prefetch" href="/assets/index.html-CQ7ghxCy.js" as="script"><link rel="prefetch" href="/assets/index.html-CT5ulj_m.js" as="script"><link rel="prefetch" href="/assets/index.html-CHMrdfHC.js" as="script"><link rel="prefetch" href="/assets/index.html-D-UPnF5x.js" as="script"><link rel="prefetch" href="/assets/index.html-BjapTdN6.js" as="script"><link rel="prefetch" href="/assets/index.html-WiecaBoZ.js" as="script"><link rel="prefetch" href="/assets/index.html-R9TYY_4v.js" as="script"><link rel="prefetch" href="/assets/index.html-BxBYYlqU.js" as="script"><link rel="prefetch" href="/assets/index.html-CvAUB1Hb.js" as="script"><link rel="prefetch" href="/assets/vue-repl-B6YWVpb_.js" as="script"><link rel="prefetch" href="/assets/codemirror-editor-B_X-FosO.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo/logo.gif" alt><!----><!----></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="é¦–é¡µ"><!---->é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/FrontEnd/Standard/HTML/" aria-label="å‰ç«¯çŸ¥è¯†åº“"><!---->å‰ç«¯çŸ¥è¯†åº“<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Java/Stream/" aria-label="åç«¯çŸ¥è¯†åº“"><span class="font-icon icon iconfont icon-iconfont icon-java" style=""></span>åç«¯çŸ¥è¯†åº“<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/DesignPattern/Info/" aria-label="è®¾è®¡æ¨¡å¼"><span class="font-icon icon iconfont icon-iconfont icon-note" style=""></span>è®¾è®¡æ¨¡å¼<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Algorithm/Dichotomy/" aria-label="å¸¸ç”¨ç®—æ³•"><span class="font-icon icon iconfont icon-iconfont icon-function" style=""></span>å¸¸ç”¨ç®—æ³•<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link active" href="/Interview/JavaScript/Closure/" aria-label="è‡ªä¿¡é¢è¯•"><span class="font-icon icon iconfont icon-iconfont icon-mian-shi-ti" style=""></span>è‡ªä¿¡é¢è¯•<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Git/" aria-label="Git"><span class="font-icon icon iconfont icon-iconfont icon-git" style=""></span>Git<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Nginx/Function/" aria-label="Nginx"><span class="font-icon icon iconfont icon-iconfont icon-nginx" style=""></span>Nginx<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Server/" aria-label="æœåŠ¡å™¨"><span class="font-icon icon iconfont icon-iconfont icon-linux" style=""></span>æœåŠ¡å™¨<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Recommend/CSS/" aria-label="æ¨è"><span class="font-icon icon iconfont icon-iconfont icon-hot" style=""></span>æ¨è<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-iconfont icon-javascript" style=""></span><span class="vp-sidebar-title">JavaScript</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable exact active" type="button"><!----><span class="vp-sidebar-title">æ¡†æ¶</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">1 - Vue</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2 - React</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable exact active" type="button"><!----><span class="vp-sidebar-title">3 - å¾®å‰ç«¯</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/Interview/Framework/Micro/QianKun/" aria-label="3.1 - ä¹¾å¤"><!---->3.1 - ä¹¾å¤<!----></a></li></ul></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ä¹¾å¤</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://shaohui-jin.github.io" target="_blank" rel="noopener noreferrer">çŸ³æ€œå®‰</a></span><span property="author" content="çŸ³æ€œå®‰"></span></span><span class="page-original-info">åŸåˆ›</span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-05-16T11:21:30.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 24 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT24M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category8 clickable" role="navigation">å¾®å‰ç«¯</span><!--]--><meta property="articleSection" content="å¾®å‰ç«¯"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag8 clickable" role="navigation">å¾®å‰ç«¯</span><!--]--><meta property="keywords" content="å¾®å‰ç«¯"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#start-opts">start(opts)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#registermicroapps-apps-lifecycles">registerMicroApps(apps, lifeCycles?)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#import-html-entry">import-html-entry</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#ä¸»åº”ç”¨æŒ‚è½½å­åº”ç”¨-html-æ¨¡æ¿">ä¸»åº”ç”¨æŒ‚è½½å­åº”ç”¨ HTML æ¨¡æ¿</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#æ²™ç®±è¿è¡Œç¯å¢ƒ-gensandbox">æ²™ç®±è¿è¡Œç¯å¢ƒ - genSandbox</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#legacysandbox">LegacySandbox</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#å¤šå®ä¾‹æ²™ç®±-proxysandbox">å¤šå®ä¾‹æ²™ç®± - ProxySandbox</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#snapshotsandbox">SnapshotSandbox</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#æŒ‚è½½æ²™ç®±-mountsandbox">æŒ‚è½½æ²™ç®± - mountSandbox</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#è®¡æ—¶å™¨åŠ«æŒ-patchtimer">è®¡æ—¶å™¨åŠ«æŒ - patchTimer</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#åŠ¨æ€æ·»åŠ æ ·å¼è¡¨å’Œè„šæœ¬æ–‡ä»¶åŠ«æŒ-patchdynamicappend">åŠ¨æ€æ·»åŠ æ ·å¼è¡¨å’Œè„šæœ¬æ–‡ä»¶åŠ«æŒ - patchDynamicAppend</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#å¸è½½æ²™ç®±-unmountsandbox">å¸è½½æ²™ç®± - unmountSandbox</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#æ³¨å†Œå†…éƒ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°">æ³¨å†Œå†…éƒ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#è§¦å‘-beforeload-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°">è§¦å‘ beforeLoad ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#è¿›å…¥åˆ°-mount-æŒ‚è½½æµç¨‹">è¿›å…¥åˆ° mount æŒ‚è½½æµç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/#è¿›å…¥åˆ°-unmount-å¸è½½æµç¨‹">è¿›å…¥åˆ° unmount å¸è½½æµç¨‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#æ€»ç»“">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#å½©è›‹">å½©è›‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/#å±•æœ›">å±•æœ›</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><p><strong>å¾®å‰ç«¯</strong> æ˜¯ä¸€ç§ç±»ä¼¼äºå¾®æœåŠ¡çš„æ¶æ„ï¼Œå®ƒå°†å¾®æœåŠ¡çš„ç†å¿µåº”ç”¨äºæµè§ˆå™¨ç«¯ï¼Œå³å°†å•é¡µé¢å‰ç«¯åº”ç”¨ç”±å•ä¸€çš„å•ä½“åº”ç”¨è½¬å˜ä¸ºå¤šä¸ªå°å‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€çš„åº”ç”¨ã€‚</p><p>å„ä¸ªå‰ç«¯åº”ç”¨è¿˜å¯ä»¥ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€‚åŒæ—¶ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥åœ¨å…±äº«ç»„ä»¶çš„åŒæ—¶è¿›è¡Œå¹¶è¡Œå¼€å‘â€”â€”è¿™äº›ç»„ä»¶å¯ä»¥é€šè¿‡ NPM æˆ–è€… Git Tagã€Git Submodule æ¥ç®¡ç†ã€‚</p><p><strong>qiankunï¼ˆä¹¾å¤ï¼‰</strong> å°±æ˜¯ä¸€æ¬¾ç”±èš‚èšé‡‘æœæ¨å‡ºçš„æ¯”è¾ƒæˆç†Ÿçš„å¾®å‰ç«¯æ¡†æ¶ï¼ŒåŸºäº <strong>single-spa</strong> è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œç”¨äºå°†Webåº”ç”¨ç”±å•ä¸€çš„å•ä½“åº”ç”¨è½¬å˜ä¸ºå¤šä¸ªå°å‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€çš„åº”ç”¨ã€‚</p><p>é‚£ä¹ˆï¼Œè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬çš„æºç è§£ææ­£å¼å¼€å§‹ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/microInfo.67x82jqpvk.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- more --><p>æˆ‘ä»¬ä»ä¸¤ä¸ªåŸºç¡€ API : <strong>registerMicroApps(apps, lifeCycles?) - æ³¨å†Œå­åº”ç”¨</strong> å’Œ <strong>start(opts?) - å¯åŠ¨ä¸»åº”ç”¨</strong> å¼€å§‹</p><p>ç”±äº <strong>registerMicroApps</strong> å‡½æ•°ä¸­è®¾ç½®çš„å›è°ƒå‡½æ•°è¾ƒå¤šï¼Œå¹¶ä¸”è¯»å–äº† <strong>start</strong> å‡½æ•°ä¸­è®¾ç½®çš„åˆå§‹é…ç½®é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä» <strong>start</strong> å‡½æ•°å¼€å§‹è§£æã€‚</p><h2 id="start-opts" tabindex="-1"><a class="header-anchor" href="#start-opts"><span>start(opts)</span></a></h2><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/start.3ye7j25zgr.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç¬¬ 196 è¡Œï¼šè®¾ç½® <strong>window</strong> çš„ <strong><strong>POWERED_BY_QIANKUN</strong></strong> å±æ€§ä¸º trueï¼Œåœ¨å­åº”ç”¨ä¸­ä½¿ç”¨ <strong>window.<strong>POWERED_BY_QIANKUN</strong></strong> å€¼åˆ¤æ–­æ˜¯å¦è¿è¡Œåœ¨ä¸»åº”ç”¨å®¹å™¨ä¸­ã€‚</p><p>ç¬¬ 198~199 è¡Œï¼šè®¾ç½®é…ç½®å‚æ•°ï¼ˆæœ‰é»˜è®¤å€¼ï¼‰ï¼Œå°†é…ç½®å‚æ•°å­˜å‚¨åœ¨ <strong>importLoaderConfiguration</strong> å¯¹è±¡ä¸­ã€‚</p><p>ç¬¬ 201~203 è¡Œï¼šæ£€æŸ¥ <strong>prefetch</strong> å±æ€§ï¼Œå¦‚æœéœ€è¦é¢„åŠ è½½ï¼Œåˆ™æ·»åŠ å…¨å±€äº‹ä»¶ <strong>single-spa:first-mount</strong> ç›‘å¬ï¼Œåœ¨ç¬¬ä¸€ä¸ªå­åº”ç”¨æŒ‚è½½åé¢„åŠ è½½å…¶ä»–å­åº”ç”¨èµ„æºï¼Œä¼˜åŒ–åç»­å…¶ä»–å­åº”ç”¨çš„åŠ è½½é€Ÿåº¦ã€‚</p><p>ç¬¬ 205 è¡Œï¼šæ ¹æ® <strong>singularMode</strong> å‚æ•°è®¾ç½®æ˜¯å¦ä¸ºå•å®ä¾‹æ¨¡å¼ã€‚</p><p>ç¬¬ 209~217 è¡Œï¼šæ ¹æ® <strong>jsSandbox</strong> å‚æ•°è®¾ç½®æ˜¯å¦å¯ç”¨æ²™ç®±è¿è¡Œç¯å¢ƒï¼Œæ—§ç‰ˆæœ¬éœ€è¦å…³é—­è¯¥é€‰é¡¹ä»¥å…¼å®¹ IEã€‚ï¼ˆæ–°ç‰ˆæœ¬åœ¨å•å®ä¾‹æ¨¡å¼ä¸‹é»˜è®¤æ”¯æŒ IEï¼Œå¤šå®ä¾‹æ¨¡å¼ä¾ç„¶ä¸æ”¯æŒ IEï¼‰ã€‚</p><p>ç¬¬ 222 è¡Œï¼šè°ƒç”¨äº† <strong>single-spa</strong> çš„ <strong>startSingleSpa</strong> æ–¹æ³•å¯åŠ¨ä¸»åº”ç”¨ã€‚</p><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œ<strong>start</strong> å‡½æ•°è´Ÿè´£åˆå§‹åŒ–ä¸€äº›å…¨å±€è®¾ç½®ï¼Œç„¶åå¯åŠ¨åº”ç”¨ã€‚è¿™äº›åˆå§‹åŒ–çš„é…ç½®å‚æ•°æœ‰ä¸€éƒ¨åˆ†å°†åœ¨ <strong>registerMicroApps</strong> æ³¨å†Œå­åº”ç”¨çš„å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><h2 id="registermicroapps-apps-lifecycles" tabindex="-1"><a class="header-anchor" href="#registermicroapps-apps-lifecycles"><span>registerMicroApps(apps, lifeCycles?)</span></a></h2><p><strong>registerMicroApps</strong> å‡½æ•°çš„ä½œç”¨æ˜¯æ³¨å†Œå­åº”ç”¨ï¼Œå¹¶ä¸”åœ¨å­åº”ç”¨æ¿€æ´»æ—¶ï¼Œåˆ›å»ºè¿è¡Œæ²™ç®±ï¼Œåœ¨ä¸åŒé˜¶æ®µè°ƒç”¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/registerMicroApps.lvhoopf3k.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œåœ¨ ç¬¬ 70~71 è¡Œ <strong>registerMicroApps</strong> å‡½æ•°åšäº†ä¸ªå¤„ç†ï¼Œé˜²æ­¢é‡å¤æ³¨å†Œç›¸åŒçš„å­åº”ç”¨ã€‚</p><p>åœ¨ ç¬¬ 74 è¡Œ è°ƒç”¨äº† <strong>single-spa</strong> çš„ <strong>registerApplication</strong> æ–¹æ³•æ³¨å†Œäº†å­åº”ç”¨ã€‚</p><p>æˆ‘ä»¬ç›´æ¥æ¥çœ‹ <strong>registerApplication</strong> æ–¹æ³•ï¼Œ<strong>registerApplication</strong> æ–¹æ³•æ˜¯ <strong>single-spa</strong> ä¸­æ³¨å†Œå­åº”ç”¨çš„æ ¸å¿ƒå‡½æ•°ã€‚è¯¥å‡½æ•°æœ‰å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯</p><ul><li>nameï¼ˆå­åº”ç”¨çš„åç§°ï¼‰</li><li>å›è°ƒå‡½æ•°ï¼ˆactiveRule æ¿€æ´»æ—¶è°ƒç”¨ï¼‰</li><li>activeRuleï¼ˆå­åº”ç”¨çš„æ¿€æ´»è§„åˆ™ï¼‰</li><li>propsï¼ˆä¸»åº”ç”¨éœ€è¦ä¼ é€’ç»™å­åº”ç”¨çš„æ•°æ®ï¼‰</li></ul><p>è¿™äº›å‚æ•°éƒ½æ˜¯ç”± <strong>single-spa</strong> ç›´æ¥å®ç°ï¼Œè¿™é‡Œå¯ä»¥å…ˆç®€å•ç†è§£ä¸ºæ³¨å†Œå­åº”ç”¨ã€‚åœ¨ç¬¦åˆ <strong>activeRule</strong> æ¿€æ´»è§„åˆ™æ—¶å°†ä¼šæ¿€æ´»å­åº”ç”¨ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè¿”å›ä¸€äº›ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚</p><blockquote><p>æ³¨æ„ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å±äº single-spaï¼Œç”± single-spa å†³å®šåœ¨ä½•æ—¶è°ƒç”¨ã€‚</p></blockquote><p>å¦‚æœä½ è¿˜æ˜¯è§‰å¾—æœ‰ç‚¹æ‡µï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ å›¾æ¥å¸®åŠ©ç†è§£ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/flow.41xtgrz232.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="import-html-entry" tabindex="-1"><a class="header-anchor" href="#import-html-entry"><span>import-html-entry</span></a></h2><p>æˆ‘ä»¬ä»ä¸Šé¢åˆ†æå¯ä»¥çœ‹å‡ºï¼Œ<strong>qiankun</strong> çš„ <strong>registerMicroApps</strong> æ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå…¥å‚ apps - <strong>Array&lt;RegistrableApp&lt;<strong>T</strong>&gt;&gt;</strong> æœ‰ä¸‰ä¸ªå‚æ•° <strong>nameã€activeRuleã€props</strong> éƒ½æ˜¯äº¤ç»™ <strong>single-spa</strong> ä½¿ç”¨ï¼Œè¿˜æœ‰ <strong>entry</strong> å’Œ <strong>render</strong> å‚æ•°è¿˜æ²¡æœ‰ç”¨åˆ°ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œéœ€è¦å…³æ³¨ <strong>entryï¼ˆå­åº”ç”¨çš„ entry åœ°å€ï¼‰</strong> å’Œ <strong>renderï¼ˆå­åº”ç”¨è¢«æ¿€æ´»æ—¶è§¦å‘çš„æ¸²æŸ“è§„åˆ™ï¼‰</strong> è¿™ä¸¤ä¸ªè¿˜æ²¡æœ‰ç”¨åˆ°çš„å‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°å»¶è¿Ÿåˆ° <strong>single-spa</strong> å­åº”ç”¨æ¿€æ´»åçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œã€‚</p><p>é‚£æˆ‘ä»¬å‡è®¾æ­¤æ—¶æˆ‘ä»¬çš„å­åº”ç”¨å·²æ¿€æ´»ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™é‡Œåšäº†ä»€ä¹ˆã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/importHtmlEntry.1e8d6f60rn.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨å­åº”ç”¨æ¿€æ´»åï¼Œé¦–å…ˆåœ¨ ç¬¬ 81~84 è¡Œ å¤„ä½¿ç”¨äº† import-html-entry åº“ä» entry è¿›å…¥åŠ è½½å­åº”ç”¨ï¼ŒåŠ è½½å®Œæˆåå°†è¿”å›ä¸€ä¸ªå¯¹è±¡</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/entry.4n7h32tidg.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><table><thead><tr><th style="text-align:left;">å­—æ®µ</th><th style="text-align:left;">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left;"><code>template</code></td><td style="text-align:left;">å°†è„šæœ¬æ–‡ä»¶å†…å®¹æ³¨é‡Šåçš„ <code>html</code> æ¨¡æ¿æ–‡ä»¶</td></tr><tr><td style="text-align:left;"><code>assetPublicPath</code></td><td style="text-align:left;">èµ„æºåœ°å€æ ¹è·¯å¾„ï¼Œå¯ç”¨äºåŠ è½½å­åº”ç”¨èµ„æº</td></tr><tr><td style="text-align:left;"><code>getExternalScripts</code></td><td style="text-align:left;">æ–¹æ³•ï¼šè·å–å¤–éƒ¨å¼•å…¥çš„è„šæœ¬æ–‡ä»¶</td></tr><tr><td style="text-align:left;"><code>getExternalStyleSheets</code></td><td style="text-align:left;">æ–¹æ³•ï¼šè·å–å¤–éƒ¨å¼•å…¥çš„æ ·å¼è¡¨æ–‡ä»¶</td></tr><tr><td style="text-align:left;"><code>execScripts</code></td><td style="text-align:left;">æ–¹æ³•ï¼šæ‰§è¡Œè¯¥æ¨¡æ¿æ–‡ä»¶ä¸­æ‰€æœ‰çš„ <code>JS</code> è„šæœ¬æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šè„šæœ¬çš„ä½œç”¨åŸŸ - <code>proxy</code> å¯¹è±¡</td></tr></tbody></table><p>æˆ‘ä»¬å…ˆå°† <strong>template æ¨¡æ¿</strong>ã€<strong>getExternalScripts</strong> å’Œ <strong>getExternalStyleSheets</strong> å‡½æ•°çš„æ‰§è¡Œç»“æœæ‰“å°å‡ºæ¥ï¼Œæ•ˆæœå¦‚ä¸‹:</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/entryDetail.3ye7j25zd3.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¤–éƒ¨å¼•å…¥çš„ä¸‰ä¸ª <strong>js</strong> è„šæœ¬æ–‡ä»¶ï¼Œè¿™ä¸ªæ¨¡æ¿æ–‡ä»¶æ²¡æœ‰å¤–éƒ¨ <strong>css</strong> æ ·å¼è¡¨ï¼Œå¯¹åº”çš„æ ·å¼è¡¨æ•°ç»„ä¹Ÿä¸ºç©ºã€‚</p><p>ç„¶åæˆ‘ä»¬å†æ¥åˆ†æ <strong>execScripts</strong> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨å°±æ˜¯æŒ‡å®šä¸€ä¸ª <strong>proxyï¼ˆé»˜è®¤æ˜¯ windowï¼‰å¯¹è±¡</strong>ï¼Œç„¶åæ‰§è¡Œè¯¥æ¨¡æ¿æ–‡ä»¶ä¸­æ‰€æœ‰çš„ JSï¼Œå¹¶è¿”å› JS æ‰§è¡Œå proxy å¯¹è±¡çš„æœ€åä¸€ä¸ªå±æ€§ã€‚</p><p>åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œè¿™ä¸ªå¯¹è±¡ä¸€èˆ¬ä¼šåŒ…å«ä¸€äº›å­åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¸»åº”ç”¨å¯ä»¥é€šè¿‡åœ¨ç‰¹å®šé˜¶æ®µè°ƒç”¨è¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œè¿›è¡ŒæŒ‚è½½å’Œé”€æ¯å­åº”ç”¨çš„æ“ä½œã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/execScripts.7awxdfmjpm.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxyLastOptions.4qr30sml5z.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨ qiankun çš„ <strong>importEntry</strong> å‡½æ•°ä¸­è¿˜ä¼ å…¥äº†é…ç½®é¡¹ <strong>getTemplate</strong>ï¼Œè¿™ä¸ªå…¶å®æ˜¯å¯¹ html ç›®æ ‡æ–‡ä»¶çš„äºŒæ¬¡å¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä½œå±•å¼€äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œå»äº†è§£ä¸€ä¸‹ã€‚</p><h2 id="ä¸»åº”ç”¨æŒ‚è½½å­åº”ç”¨-html-æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#ä¸»åº”ç”¨æŒ‚è½½å­åº”ç”¨-html-æ¨¡æ¿"><span>ä¸»åº”ç”¨æŒ‚è½½å­åº”ç”¨ HTML æ¨¡æ¿</span></a></h2><p>æˆ‘ä»¬å›åˆ° qiankun æºç éƒ¨åˆ†ç»§ç»­çœ‹</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/render.45g03o1is.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾çœ‹å‡ºï¼Œåœ¨ ç¬¬ 85~87 è¡Œ å¤„ï¼Œå…ˆå¯¹å•å®ä¾‹è¿›è¡Œæ£€æµ‹ã€‚åœ¨å•å®ä¾‹æ¨¡å¼ä¸‹ï¼Œæ–°çš„å­åº”ç”¨æŒ‚è½½è¡Œä¸ºä¼šåœ¨æ—§çš„å­åº”ç”¨å¸è½½ä¹‹åæ‰å¼€å§‹ã€‚</p><p>åœ¨ ç¬¬ 88 è¡Œ ä¸­ï¼Œæ‰§è¡Œæ³¨å†Œå­åº”ç”¨æ—¶ä¼ å…¥çš„ render å‡½æ•°ï¼Œå°† HTML Template å’Œ loading ä½œä¸ºå…¥å‚ï¼Œrender å‡½æ•°çš„å†…å®¹ä¸€èˆ¬æ˜¯å°† HTML æŒ‚è½½åœ¨æŒ‡å®šå®¹å™¨ä¸­ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mountedApp.lvhoopf2i.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä¸»åº”ç”¨å·²ç»å°†å­åº”ç”¨åŸºç¡€çš„ HTML ç»“æ„æŒ‚è½½åœ¨äº†ä¸»åº”ç”¨çš„æŸä¸ªå®¹å™¨å†…ï¼Œæ¥ä¸‹æ¥è¿˜éœ€è¦æ‰§è¡Œå­åº”ç”¨å¯¹åº”çš„ mount æ–¹æ³•ï¼ˆå¦‚ Vue.$mountï¼‰å¯¹å­åº”ç”¨çŠ¶æ€è¿›è¡ŒæŒ‚è½½ã€‚</p><p>æ­¤æ—¶é¡µé¢è¿˜å¯ä»¥æ ¹æ® loading å‚æ•°å¼€å¯ä¸€ä¸ªç±»ä¼¼åŠ è½½çš„æ•ˆæœï¼Œç›´è‡³å­åº”ç”¨å…¨éƒ¨å†…å®¹åŠ è½½å®Œæˆã€‚</p><h2 id="æ²™ç®±è¿è¡Œç¯å¢ƒ-gensandbox" tabindex="-1"><a class="header-anchor" href="#æ²™ç®±è¿è¡Œç¯å¢ƒ-gensandbox"><span>æ²™ç®±è¿è¡Œç¯å¢ƒ - genSandbox</span></a></h2><p>æˆ‘ä»¬å›åˆ° qiankun æºç éƒ¨åˆ†ç»§ç»­çœ‹ï¼Œæ­¤æ—¶è¿˜æ˜¯å­åº”ç”¨æ¿€æ´»æ—¶çš„å›è°ƒå‡½æ•°éƒ¨åˆ†ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandbox.2krof0uxch.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨ ç¬¬ 90~98 è¡Œ æ˜¯ qiankun æ¯”è¾ƒæ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯å‡ ä¸ªå­åº”ç”¨ä¹‹é—´çŠ¶æ€ç‹¬ç«‹çš„å…³é”®ï¼Œé‚£å°±æ˜¯ js çš„æ²™ç®±è¿è¡Œç¯å¢ƒã€‚å¦‚æœå…³é—­äº† useJsSandbox é€‰é¡¹ï¼Œé‚£ä¹ˆæ‰€æœ‰å­åº”ç”¨çš„æ²™ç®±ç¯å¢ƒéƒ½æ˜¯ windowï¼Œå°±å¾ˆå®¹æ˜“å¯¹å…¨å±€çŠ¶æ€äº§ç”Ÿæ±¡æŸ“ã€‚</p><p>æˆ‘ä»¬è¿›å…¥åˆ° genSandbox å†…éƒ¨ï¼Œçœ‹çœ‹ qiankun æ˜¯å¦‚ä½•åˆ›å»ºçš„ ï¼ˆJSï¼‰æ²™ç®±è¿è¡Œç¯å¢ƒã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandboxDetail.231mqftjrp.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡º genSandbox å†…éƒ¨çš„æ²™ç®±ä¸»è¦æ˜¯é€šè¿‡æ˜¯å¦æ”¯æŒ window.Proxy åˆ†ä¸º LegacySandbox å’Œ SnapshotSandbox ä¸¤ç§ã€‚</p><blockquote><p>æ‰©å±•é˜…è¯»ï¼šå¤šå®ä¾‹è¿˜æœ‰ä¸€ç§ ProxySandbox æ²™ç®±ï¼Œè¿™ç§æ²™ç®±æ¨¡å¼ç›®å‰çœ‹æ¥æ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚ç”±äºå…¶è¡¨ç°ä¸æ—§ç‰ˆæœ¬ç•¥æœ‰ä¸åŒï¼Œæ‰€ä»¥æš‚æ—¶åªç”¨äºå¤šå®ä¾‹æ¨¡å¼ã€‚</p><p>ProxySandbox æ²™ç®±ç¨³å®šä¹‹åå¯èƒ½ä¼šä½œä¸ºå•å®ä¾‹æ²™ç®±ä½¿ç”¨ã€‚</p></blockquote><h3 id="legacysandbox" tabindex="-1"><a class="header-anchor" href="#legacysandbox"><span>LegacySandbox</span></a></h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ LegacySandbox æ²™ç®±æ˜¯æ€ä¹ˆè¿›è¡ŒçŠ¶æ€éš”ç¦»çš„ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/legacySandbox.5c0qn3h1ew.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ LegacySandbox ç±»çš„å‡ ä¸ªå±æ€§ï¼š</p><table><thead><tr><th style="text-align:left;">å­—æ®µ</th><th style="text-align:left;">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left;"><code>addedPropsMapInSandbox</code></td><td style="text-align:left;">è®°å½•æ²™ç®±è¿è¡ŒæœŸé—´æ–°å¢çš„å…¨å±€å˜é‡</td></tr><tr><td style="text-align:left;"><code>modifiedPropsOriginalValueMapInSandbox</code></td><td style="text-align:left;">è®°å½•æ²™ç®±è¿è¡ŒæœŸé—´æ›´æ–°çš„å…¨å±€å˜é‡</td></tr><tr><td style="text-align:left;"><code>currentUpdatedPropsValueMap</code></td><td style="text-align:left;">è®°å½•æ²™ç®±è¿è¡ŒæœŸé—´æ“ä½œè¿‡çš„å…¨å±€å˜é‡ã€‚ä¸Šé¢ä¸¤ä¸ª <code>Map</code> ç”¨äº <code>å…³é—­æ²™ç®±</code> æ—¶è¿˜åŸå…¨å±€çŠ¶æ€ï¼Œè€Œ <code>currentUpdatedPropsValueMap</code> æ˜¯åœ¨ <code>æ¿€æ´»æ²™ç®±</code> æ—¶è¿˜åŸæ²™ç®±çš„ç‹¬ç«‹çŠ¶æ€</td></tr><tr><td style="text-align:left;"><code>name</code></td><td style="text-align:left;">æ²™ç®±åç§°</td></tr><tr><td style="text-align:left;"><code>proxy</code></td><td style="text-align:left;">ä»£ç†å¯¹è±¡ï¼Œå¯ä»¥ç†è§£ä¸ºå­åº”ç”¨çš„ <code>global/window</code> å¯¹è±¡</td></tr><tr><td style="text-align:left;"><code>sandboxRunning</code></td><td style="text-align:left;">å½“å‰æ²™ç®±æ˜¯å¦åœ¨è¿è¡Œä¸­</td></tr><tr><td style="text-align:left;"><code>active</code></td><td style="text-align:left;">æ¿€æ´»æ²™ç®±ï¼Œåœ¨å­åº”ç”¨æŒ‚è½½æ—¶å¯åŠ¨</td></tr><tr><td style="text-align:left;"><code>inactive</code></td><td style="text-align:left;">å…³é—­æ²™ç®±ï¼Œåœ¨å­åº”ç”¨å¸è½½æ—¶å¯åŠ¨</td></tr><tr><td style="text-align:left;"><code>constructor</code></td><td style="text-align:left;">æ„é€ å‡½æ•°ï¼Œåˆ›å»ºæ²™ç®±ç¯å¢ƒ</td></tr></tbody></table><p>æˆ‘ä»¬ç°åœ¨ä» window.Proxy çš„ set å’Œ get å±æ€§æ¥è¯¦ç»†è®²è§£ LegacySandbox æ˜¯å¦‚ä½•å®ç°æ²™ç®±è¿è¡Œç¯å¢ƒçš„ã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandboxProxy.39kxz1igd6.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>æ³¨æ„ï¼šå­åº”ç”¨æ²™ç®±ä¸­çš„ proxy å¯¹è±¡ï¼ˆç¬¬ 62 è¡Œï¼‰å¯ä»¥ç®€å•ç†è§£ä¸ºå­åº”ç”¨çš„ window å…¨å±€å¯¹è±¡ï¼ˆä»£ç å¦‚ä¸‹ï¼‰ï¼Œå­åº”ç”¨å¯¹å…¨å±€å±æ€§çš„æ“ä½œå°±æ˜¯å¯¹è¯¥ proxy å¯¹è±¡å±æ€§çš„æ“ä½œï¼Œå¸¦ç€è¿™ä»½ç†è§£ç»§ç»­å¾€ä¸‹çœ‹å§ã€‚</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// å­åº”ç”¨è„šæœ¬æ–‡ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</span>
<span class="token function">eval</span><span class="token punctuation">(</span>
  <span class="token comment">// è¿™é‡Œå°† proxy ä½œä¸º window å‚æ•°ä¼ å…¥</span>
  <span class="token comment">// å­åº”ç”¨çš„å…¨å±€å¯¹è±¡å°±æ˜¯è¯¥å­åº”ç”¨æ²™ç®±çš„ proxy å¯¹è±¡</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* å­åº”ç”¨è„šæœ¬æ–‡ä»¶å†…å®¹ */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ ç¬¬ 65~72 è¡Œä¸­ï¼Œå½“è°ƒç”¨ set å‘å­åº”ç”¨ proxy/window å¯¹è±¡è®¾ç½®å±æ€§æ—¶ï¼Œæ‰€æœ‰çš„å±æ€§è®¾ç½®å’Œæ›´æ–°éƒ½ä¼šå…ˆè®°å½•åœ¨ addedPropsMapInSandbox æˆ– modifiedPropsOriginalValueMapInSandbox ä¸­ï¼Œç„¶åç»Ÿä¸€è®°å½•åˆ°currentUpdatedPropsValueMap ä¸­ã€‚</p><p>åœ¨ ç¬¬ 73 è¡Œ ä¸­ä¿®æ”¹å…¨å±€ window çš„å±æ€§ï¼Œå®Œæˆå€¼çš„è®¾ç½®ã€‚</p><p>å½“è°ƒç”¨ get ä»å­åº”ç”¨ proxy/window å¯¹è±¡å–å€¼æ—¶ï¼Œä¼šç›´æ¥ä» window å¯¹è±¡ä¸­å–å€¼ã€‚å¯¹äºéæ„é€ å‡½æ•°çš„å–å€¼å°†ä¼šå¯¹ this æŒ‡é’ˆç»‘å®šåˆ° window å¯¹è±¡åï¼Œå†è¿”å›å‡½æ•°ã€‚</p><p>LegacySandbox çš„æ²™ç®±éš”ç¦»æ˜¯é€šè¿‡æ¿€æ´»æ²™ç®±æ—¶è¿˜åŸå­åº”ç”¨çŠ¶æ€ï¼Œå¸è½½æ—¶è¿˜åŸä¸»åº”ç”¨çŠ¶æ€ï¼ˆå­åº”ç”¨æŒ‚è½½å‰çš„å…¨å±€çŠ¶æ€ï¼‰å®ç°çš„ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/legacySandboxActive.ibvqywcbv.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š</p><p>ç¬¬ 37 è¡Œï¼šåœ¨æ¿€æ´»æ²™ç®±æ—¶ï¼Œæ²™ç®±ä¼šé€šè¿‡ currentUpdatedPropsValueMap æŸ¥è¯¢åˆ°å­åº”ç”¨çš„ç‹¬ç«‹çŠ¶æ€æ± ï¼ˆæ²™ç®±å¯èƒ½ä¼šæ¿€æ´»å¤šæ¬¡ï¼Œè¿™é‡Œæ˜¯æ²™ç®±æ›¾ç»æ¿€æ´»æœŸé—´è¢«ä¿®æ”¹çš„å…¨å±€å˜é‡ï¼‰ï¼Œç„¶åè¿˜åŸå­åº”ç”¨çŠ¶æ€ã€‚</p><p>ç¬¬ 44~45 è¡Œï¼šåœ¨å…³é—­æ²™ç®±æ—¶ï¼Œé€šè¿‡ addedPropsMapInSandbox åˆ é™¤åœ¨æ²™ç®±è¿è¡ŒæœŸé—´æ–°å¢çš„å…¨å±€å˜é‡ï¼Œé€šè¿‡ modifiedPropsOriginalValueMapInSandbox è¿˜åŸæ²™ç®±è¿è¡ŒæœŸé—´è¢«ä¿®æ”¹çš„å…¨å±€å˜é‡ï¼Œä»è€Œè¿˜åŸåˆ°å­åº”ç”¨æŒ‚è½½å‰çš„çŠ¶æ€ã€‚</p><p>ä»ä¸Šé¢çš„åˆ†æå¯ä»¥å¾—çŸ¥ï¼ŒLegacySandbox çš„æ²™ç®±éš”ç¦»æœºåˆ¶åˆ©ç”¨å¿«ç…§æ¨¡å¼å®ç°ï¼Œæˆ‘ä»¬ç”»ä¸€å¼ å›¾æ¥å¸®åŠ©ç†è§£ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/legacySandboxFlow.wibhu4n72.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="å¤šå®ä¾‹æ²™ç®±-proxysandbox" tabindex="-1"><a class="header-anchor" href="#å¤šå®ä¾‹æ²™ç®±-proxysandbox"><span>å¤šå®ä¾‹æ²™ç®± - ProxySandbox</span></a></h3><p>ProxySandbox æ˜¯ä¸€ç§æ–°çš„æ²™ç®±æ¨¡å¼ï¼Œç›®å‰ç”¨äºå¤šå®ä¾‹æ¨¡å¼çš„çŠ¶æ€éš”ç¦»ã€‚åœ¨ç¨³å®šåä»¥åå¯èƒ½ä¼šæˆä¸º å•å®ä¾‹æ²™ç®±ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ ProxySandbox æ²™ç®±æ˜¯æ€ä¹ˆè¿›è¡ŒçŠ¶æ€éš”ç¦»çš„ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxySandbox.1ov6zkl8yx.webp" alt="" width="600" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ ProxySandbox ç±»çš„å‡ ä¸ªå±æ€§ï¼š</p><table><thead><tr><th style="text-align:left;">å­—æ®µ</th><th style="text-align:left;">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left;"><code>updateValueMap</code></td><td style="text-align:left;">è®°å½•æ²™ç®±ä¸­æ›´æ–°çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå­åº”ç”¨ä¸­ç‹¬ç«‹çš„çŠ¶æ€æ± </td></tr><tr><td style="text-align:left;"><code>name</code></td><td style="text-align:left;">æ²™ç®±åç§°</td></tr><tr><td style="text-align:left;"><code>proxy</code></td><td style="text-align:left;">ä»£ç†å¯¹è±¡ï¼Œå¯ä»¥ç†è§£ä¸ºå­åº”ç”¨çš„ <code>global/window</code> å¯¹è±¡</td></tr><tr><td style="text-align:left;"><code>sandboxRunning</code></td><td style="text-align:left;">å½“å‰æ²™ç®±æ˜¯å¦åœ¨è¿è¡Œä¸­</td></tr><tr><td style="text-align:left;"><code>active</code></td><td style="text-align:left;">æ¿€æ´»æ²™ç®±ï¼Œåœ¨å­åº”ç”¨æŒ‚è½½æ—¶å¯åŠ¨</td></tr><tr><td style="text-align:left;"><code>inactive</code></td><td style="text-align:left;">å…³é—­æ²™ç®±ï¼Œåœ¨å­åº”ç”¨å¸è½½æ—¶å¯åŠ¨</td></tr><tr><td style="text-align:left;"><code>constructor</code></td><td style="text-align:left;">æ„é€ å‡½æ•°ï¼Œåˆ›å»ºæ²™ç®±ç¯å¢ƒ</td></tr></tbody></table><p>æˆ‘ä»¬ç°åœ¨ä» window.Proxy çš„ set å’Œ get å±æ€§æ¥è¯¦ç»†è®²è§£ ProxySandbox æ˜¯å¦‚ä½•å®ç°æ²™ç®±è¿è¡Œç¯å¢ƒçš„ã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxySandboxProxy.4911c7l7la.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>æ³¨æ„ï¼šå­åº”ç”¨æ²™ç®±ä¸­çš„ proxy å¯¹è±¡å¯ä»¥ç®€å•ç†è§£ä¸ºå­åº”ç”¨çš„ window å…¨å±€å¯¹è±¡ï¼ˆä»£ç å¦‚ä¸‹ï¼‰ï¼Œå­åº”ç”¨å¯¹å…¨å±€å±æ€§çš„æ“ä½œå°±æ˜¯å¯¹è¯¥ proxy å¯¹è±¡å±æ€§çš„æ“ä½œï¼Œå¸¦ç€è¿™ä»½ç†è§£ç»§ç»­å¾€ä¸‹çœ‹å§ã€‚</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// å­åº”ç”¨è„šæœ¬æ–‡ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</span>
<span class="token function">eval</span><span class="token punctuation">(</span>
  <span class="token comment">// è¿™é‡Œå°† proxy ä½œä¸º window å‚æ•°ä¼ å…¥</span>
  <span class="token comment">// å­åº”ç”¨çš„å…¨å±€å¯¹è±¡å°±æ˜¯è¯¥å­åº”ç”¨æ²™ç®±çš„ proxy å¯¹è±¡</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* å­åº”ç”¨è„šæœ¬æ–‡ä»¶å†…å®¹ */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“è°ƒç”¨ set å‘å­åº”ç”¨ proxy/window å¯¹è±¡è®¾ç½®å±æ€§æ—¶ï¼Œæ‰€æœ‰çš„å±æ€§è®¾ç½®å’Œæ›´æ–°éƒ½ä¼šå‘½ä¸­ updateValueMapï¼Œå­˜å‚¨åœ¨ updateValueMap é›†åˆä¸­ï¼ˆç¬¬ 38 è¡Œï¼‰ï¼Œä»è€Œé¿å…å¯¹ window å¯¹è±¡äº§ç”Ÿå½±å“ï¼ˆæ—§ç‰ˆæœ¬åˆ™æ˜¯é€šè¿‡ diff ç®—æ³•è¿˜åŸ window å¯¹è±¡çŠ¶æ€å¿«ç…§ï¼Œå­åº”ç”¨ä¹‹é—´çš„çŠ¶æ€æ˜¯éš”ç¦»çš„ï¼Œè€Œçˆ¶å­åº”ç”¨ä¹‹é—´ window å¯¹è±¡ä¼šæœ‰æ±¡æŸ“ï¼‰ã€‚</p><p>å½“è°ƒç”¨ get ä»å­åº”ç”¨ proxy/window å¯¹è±¡å–å€¼æ—¶ï¼Œä¼šä¼˜å…ˆä»å­åº”ç”¨çš„æ²™ç®±çŠ¶æ€æ±  updateValueMap ä¸­å–å€¼ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­æ‰ä»ä¸»åº”ç”¨çš„ window å¯¹è±¡ä¸­å–å€¼ï¼ˆç¬¬ 49 è¡Œï¼‰ã€‚å¯¹äºéæ„é€ å‡½æ•°çš„å–å€¼å°†ä¼šå¯¹ this æŒ‡é’ˆç»‘å®šåˆ° window å¯¹è±¡åï¼Œå†è¿”å›å‡½æ•°ã€‚</p><p>å¦‚æ­¤ä¸€æ¥ï¼ŒProxySandbox æ²™ç®±åº”ç”¨ä¹‹é—´çš„éš”ç¦»å°±å®Œæˆäº†ï¼Œæ‰€æœ‰å­åº”ç”¨å¯¹ proxy/window å¯¹è±¡å€¼çš„å­˜å–éƒ½å—åˆ°äº†æ§åˆ¶ã€‚è®¾ç½®å€¼åªä¼šä½œç”¨åœ¨æ²™ç®±å†…éƒ¨çš„ updateValueMap é›†åˆä¸Šï¼Œå–å€¼ä¹Ÿæ˜¯ä¼˜å…ˆå–å­åº”ç”¨ç‹¬ç«‹çŠ¶æ€æ± ï¼ˆupdateValueMapï¼‰ä¸­çš„å€¼ï¼Œæ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œå†ä» proxy/window å¯¹è±¡ä¸­å–å€¼ã€‚</p><p>ç›¸æ¯”è¾ƒè€Œè¨€ï¼ŒProxySandbox æ˜¯æœ€å®Œå¤‡çš„æ²™ç®±æ¨¡å¼ï¼Œå®Œå…¨éš”ç¦»äº†å¯¹ window å¯¹è±¡çš„æ“ä½œï¼Œä¹Ÿè§£å†³äº†å¿«ç…§æ¨¡å¼ä¸­å­åº”ç”¨è¿è¡ŒæœŸé—´ä»ç„¶ä¼šå¯¹ window é€ æˆæ±¡æŸ“çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å¯¹ ProxySandbox æ²™ç®±ç”»ä¸€å¼ å›¾æ¥åŠ æ·±ç†è§£ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxySandboxFlow.6pn9r4s3hm.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="snapshotsandbox" tabindex="-1"><a class="header-anchor" href="#snapshotsandbox"><span>SnapshotSandbox</span></a></h3><p>åœ¨ä¸æ”¯æŒ window.Proxy å±æ€§æ—¶ï¼Œå°†ä¼šä½¿ç”¨ SnapshotSandbox æ²™ç®±ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å…¶å†…éƒ¨å®ç°ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/snapshotSandbox.92pw8c5won.webp" alt="" height="600" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ SnapshotSandbox ç±»çš„å‡ ä¸ªå±æ€§ï¼š</p><table><thead><tr><th style="text-align:left;">å­—æ®µ</th><th style="text-align:left;">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left;"><code>name</code></td><td style="text-align:left;">æ²™ç®±åç§°</td></tr><tr><td style="text-align:left;"><code>proxy</code></td><td style="text-align:left;">ä»£ç†å¯¹è±¡ï¼Œæ­¤å¤„ä¸º <code>window</code> å¯¹è±¡</td></tr><tr><td style="text-align:left;"><code>sandboxRunning</code></td><td style="text-align:left;">å½“å‰æ²™ç®±æ˜¯å¦æ¿€æ´»</td></tr><tr><td style="text-align:left;"><code>windowSnapshot</code></td><td style="text-align:left;"><code>window</code> çŠ¶æ€å¿«ç…§</td></tr><tr><td style="text-align:left;"><code>modifyPropsMap</code></td><td style="text-align:left;">æ²™ç®±è¿è¡ŒæœŸé—´è¢«ä¿®æ”¹è¿‡çš„ <code>window</code> å±æ€§</td></tr><tr><td style="text-align:left;"><code>constructor</code></td><td style="text-align:left;">æ„é€ å‡½æ•°ï¼Œæ¿€æ´»æ²™ç®±</td></tr><tr><td style="text-align:left;"><code>active</code></td><td style="text-align:left;">æ¿€æ´»æ²™ç®±ï¼Œåœ¨å­åº”ç”¨æŒ‚è½½æ—¶å¯åŠ¨</td></tr><tr><td style="text-align:left;"><code>inactive</code></td><td style="text-align:left;">å…³é—­æ²™ç®±ï¼Œåœ¨å­åº”ç”¨å¸è½½æ—¶å¯åŠ¨</td></tr></tbody></table><p>SnapshotSandbox çš„æ²™ç®±ç¯å¢ƒä¸»è¦æ˜¯é€šè¿‡æ¿€æ´»æ—¶è®°å½• window çŠ¶æ€å¿«ç…§ï¼Œåœ¨å…³é—­æ—¶é€šè¿‡å¿«ç…§è¿˜åŸ window å¯¹è±¡æ¥å®ç°çš„ã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/snapshotSandboxActive.2obacqo05e.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬å…ˆçœ‹ active å‡½æ•°ï¼Œåœ¨æ²™ç®±æ¿€æ´»æ—¶ï¼Œä¼šå…ˆç»™å½“å‰ window å¯¹è±¡æ‰“ä¸€ä¸ªå¿«ç…§ï¼Œè®°å½•æ²™ç®±æ¿€æ´»å‰çš„çŠ¶æ€ï¼ˆç¬¬ 38~40 è¡Œï¼‰ã€‚æ‰“å®Œå¿«ç…§åï¼Œå‡½æ•°å†…éƒ¨å°† window çŠ¶æ€é€šè¿‡ modifyPropsMap è®°å½•è¿˜åŸåˆ°ä¸Šæ¬¡çš„æ²™ç®±è¿è¡Œç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯è¿˜åŸæ²™ç®±æ¿€æ´»æœŸé—´ï¼ˆå†å²è®°å½•ï¼‰ä¿®æ”¹è¿‡çš„ window å±æ€§ã€‚</p><p>åœ¨æ²™ç®±å…³é—­æ—¶ï¼Œè°ƒç”¨ inactive å‡½æ•°ï¼Œåœ¨æ²™ç®±å…³é—­å‰é€šè¿‡éå†æ¯”è¾ƒæ¯ä¸€ä¸ªå±æ€§ï¼Œå°†è¢«æ”¹å˜çš„ window å¯¹è±¡å±æ€§å€¼ï¼ˆç¬¬ 54 è¡Œï¼‰è®°å½•åœ¨ modifyPropsMap é›†åˆä¸­ã€‚åœ¨è®°å½•äº† modifyPropsMap åï¼Œå°† window å¯¹è±¡é€šè¿‡å¿«ç…§ windowSnapshot è¿˜åŸåˆ°è¢«æ²™ç®±æ¿€æ´»å‰çš„çŠ¶æ€ï¼ˆç¬¬ 55 è¡Œï¼‰ï¼Œç›¸å½“äºæ˜¯å°†å­åº”ç”¨è¿è¡ŒæœŸé—´å¯¹ window é€ æˆçš„æ±¡æŸ“å…¨éƒ¨æ¸…é™¤ã€‚</p><p>SnapshotSandbox æ²™ç®±å°±æ˜¯åˆ©ç”¨å¿«ç…§å®ç°äº†å¯¹ window å¯¹è±¡çŠ¶æ€éš”ç¦»çš„ç®¡ç†ã€‚ç›¸æ¯”è¾ƒ ProxySandbox è€Œè¨€ï¼Œåœ¨å­åº”ç”¨æ¿€æ´»æœŸé—´ï¼ŒSnapshotSandbox å°†ä¼šå¯¹ window å¯¹è±¡é€ æˆæ±¡æŸ“ï¼Œå±äºä¸€ä¸ªå¯¹ä¸æ”¯æŒ Proxy å±æ€§çš„æµè§ˆå™¨çš„å‘ä¸‹å…¼å®¹æ–¹æ¡ˆã€‚</p><p>æˆ‘ä»¬å¯¹ SnapshotSandbox æ²™ç®±ç”»ä¸€å¼ å›¾æ¥åŠ æ·±ç†è§£ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/snapshotSandboxFlow.6f0fxzcvd3.webp" alt="" height="600" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="æŒ‚è½½æ²™ç®±-mountsandbox" tabindex="-1"><a class="header-anchor" href="#æŒ‚è½½æ²™ç®±-mountsandbox"><span>æŒ‚è½½æ²™ç®± - mountSandbox</span></a></h2><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/genSandbox.2krof0uxch.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬ç»§ç»­å›åˆ°è¿™å¼ å›¾ï¼ŒgenSandbox å‡½æ•°ä¸ä»…è¿”å›äº†ä¸€ä¸ª sandbox æ²™ç®±ï¼Œè¿˜è¿”å›äº†ä¸€ä¸ª mount å’Œ unmount æ–¹æ³•ï¼Œåˆ†åˆ«åœ¨å­åº”ç”¨æŒ‚è½½æ—¶å’Œå¸è½½æ—¶çš„æ—¶å€™è°ƒç”¨ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹çœ‹ mount å‡½æ•°å†…éƒ¨ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount.4xuaw88qki.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é¦–å…ˆï¼Œåœ¨ mount å†…éƒ¨å…ˆæ¿€æ´»äº†å­åº”ç”¨æ²™ç®±ï¼ˆç¬¬ 26 è¡Œï¼‰ï¼Œåœ¨æ²™ç®±å¯åŠ¨åå¼€å§‹åŠ«æŒå„ç±»å…¨å±€ç›‘å¬ï¼ˆç¬¬ 27 è¡Œï¼‰ï¼Œæˆ‘ä»¬è¿™é‡Œé‡ç‚¹çœ‹çœ‹ patchAtMounting å†…éƒ¨æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchAtMounting.54xirnuw0c.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>patchAtMounting å†…éƒ¨è°ƒç”¨äº†ä¸‹é¢å››ä¸ªå‡½æ•°ï¼š</p><ul><li>patchTimerï¼ˆè®¡æ—¶å™¨åŠ«æŒï¼‰</li><li>patchWindowListenerï¼ˆwindow äº‹ä»¶ç›‘å¬åŠ«æŒï¼‰</li><li>patchHistoryListenerï¼ˆwindow.history äº‹ä»¶ç›‘å¬åŠ«æŒï¼‰</li><li>patchDynamicAppendï¼ˆåŠ¨æ€æ·»åŠ  Head å…ƒç´ äº‹ä»¶åŠ«æŒï¼‰</li></ul><p>ä¸Šé¢å››ä¸ªå‡½æ•°å®ç°äº†å¯¹ window æŒ‡å®šå¯¹è±¡çš„ç»Ÿä¸€åŠ«æŒï¼Œæˆ‘ä»¬å¯ä»¥æŒ‘ä¸€äº›è§£æçœ‹çœ‹å…¶å†…éƒ¨å®ç°ã€‚</p><h3 id="è®¡æ—¶å™¨åŠ«æŒ-patchtimer" tabindex="-1"><a class="header-anchor" href="#è®¡æ—¶å™¨åŠ«æŒ-patchtimer"><span>è®¡æ—¶å™¨åŠ«æŒ - patchTimer</span></a></h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ patchTimer å¯¹è®¡æ—¶å™¨çš„åŠ«æŒï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchTimer-patch.839sv635id.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒpatchTimer å†…éƒ¨å°† setInterval è¿›è¡Œé‡è½½ï¼Œå°†æ¯ä¸ªå¯ç”¨çš„å®šæ—¶å™¨çš„ intervalId éƒ½æ”¶é›†èµ·æ¥ï¼ˆç¬¬ 23~24 è¡Œï¼‰ï¼Œä»¥ä¾¿åœ¨å­åº”ç”¨å¸è½½æ—¶è°ƒç”¨ free å‡½æ•°å°†è®¡æ—¶å™¨å…¨éƒ¨æ¸…é™¤ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchTimer-free.3ye7j25zfl.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨å­åº”ç”¨åŠ è½½æ—¶çš„ setInterval å‡½æ•°éªŒè¯å³å¯ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchTimer-setInterval-log.6ik1vp5y1y.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¿›å…¥å­åº”ç”¨æ—¶ï¼ŒsetInterval å·²ç»è¢«æ›¿æ¢æˆäº†åŠ«æŒåçš„å‡½æ•°ï¼Œé˜²æ­¢å…¨å±€è®¡æ—¶å™¨æ³„éœ²æ±¡æŸ“ã€‚</p><h3 id="åŠ¨æ€æ·»åŠ æ ·å¼è¡¨å’Œè„šæœ¬æ–‡ä»¶åŠ«æŒ-patchdynamicappend" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€æ·»åŠ æ ·å¼è¡¨å’Œè„šæœ¬æ–‡ä»¶åŠ«æŒ-patchdynamicappend"><span>åŠ¨æ€æ·»åŠ æ ·å¼è¡¨å’Œè„šæœ¬æ–‡ä»¶åŠ«æŒ - patchDynamicAppend</span></a></h3><p>patchWindowListener å’Œ patchHistoryListener çš„å®ç°éƒ½ä¸ patchTimer å®ç°ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸ä½œå¤è¿°äº†ã€‚</p><p>æˆ‘ä»¬éœ€è¦é‡ç‚¹å¯¹ patchDynamicAppend å‡½æ•°è¿›è¡Œè§£æï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åŠ«æŒå¯¹ head å…ƒç´ çš„æ“ä½œï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-patch.3k7rs6xok7.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒpatchDynamicAppend ä¸»è¦æ˜¯å¯¹åŠ¨æ€æ·»åŠ çš„ style æ ·å¼è¡¨å’Œ script æ ‡ç­¾åšäº†å¤„ç†ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹çœ‹å¯¹ style æ ·å¼è¡¨çš„å¤„ç†ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-style.3ye7j25zfi.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œä¸»è¦çš„å¤„ç†é€»è¾‘åœ¨ ç¬¬ 68~74 è¡Œï¼Œå¦‚æœå½“å‰å­åº”ç”¨å¤„äºæ¿€æ´»çŠ¶æ€ï¼ˆåˆ¤æ–­å­åº”ç”¨çš„æ¿€æ´»çŠ¶æ€ä¸»è¦æ˜¯å› ä¸ºï¼šå½“ä¸»åº”ç”¨åˆ‡æ¢è·¯ç”±æ—¶å¯èƒ½ä¼šè‡ªåŠ¨æ·»åŠ åŠ¨æ€æ ·å¼è¡¨ï¼Œ æ­¤æ—¶éœ€è¦é¿å…ä¸»åº”ç”¨çš„æ ·å¼è¡¨è¢«æ·»åŠ åˆ°å­åº”ç”¨headèŠ‚ç‚¹ä¸­å¯¼è‡´å‡ºé”™ï¼‰ï¼Œé‚£ä¹ˆåŠ¨æ€ style æ ·å¼è¡¨å°±ä¼šè¢«æ·»åŠ åˆ°å­åº”ç”¨å®¹å™¨å†…ï¼ˆè§ä¸‹å›¾ï¼‰ï¼Œåœ¨å­åº”ç”¨å¸è½½æ—¶æ ·å¼è¡¨ä¹Ÿå¯ä»¥å’Œå­åº”ç”¨ä¸€èµ·è¢«å¸è½½ï¼Œä»è€Œé¿å…æ ·å¼æ±¡æŸ“ã€‚ åŒæ—¶ï¼ŒåŠ¨æ€æ ·å¼è¡¨ä¹Ÿä¼šå­˜å‚¨åœ¨ dynamicStyleSheetElements æ•°ç»„ä¸­ï¼Œåœ¨åé¢è¿˜ä¼šæåˆ°å…¶ç”¨å¤„ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-dynamicStyleSheetElements.39kxz1igen.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹å¯¹ script è„šæœ¬æ–‡ä»¶çš„å¤„ç†ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-script.231mqftjto.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¯¹åŠ¨æ€ script è„šæœ¬æ–‡ä»¶çš„å¤„ç†è¾ƒä¸ºå¤æ‚ä¸€äº›ï¼Œæˆ‘ä»¬ä¹Ÿæ¥è§£æä¸€æ³¢ï¼š</p><p>åœ¨ ç¬¬ 83~101 è¡Œ å¤„å¯¹å¤–éƒ¨å¼•å…¥çš„ script è„šæœ¬æ–‡ä»¶ä½¿ç”¨ fetch è·å–ï¼Œç„¶åä½¿ç”¨ execScripts æŒ‡å®š proxy å¯¹è±¡ï¼ˆä½œä¸º window å¯¹è±¡ï¼‰åæ‰§è¡Œè„šæœ¬æ–‡ä»¶å†…å®¹ï¼ŒåŒæ—¶ä¹Ÿè§¦å‘äº† load å’Œ error ä¸¤ä¸ªäº‹ä»¶ã€‚</p><p>åœ¨ ç¬¬ 103~106 è¡Œ å¤„å°†æ³¨é‡Šåçš„è„šæœ¬æ–‡ä»¶å†…å®¹ä»¥æ³¨é‡Šçš„å½¢å¼æ·»åŠ åˆ°å­åº”ç”¨å®¹å™¨å†…ã€‚</p><p>åœ¨ ç¬¬ 109~113 è¡Œ æ˜¯å¯¹å†…åµŒè„šæœ¬æ–‡ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå°±ä¸ä½œå¤è¿°äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¯¹åŠ¨æ€æ·»åŠ çš„è„šæœ¬è¿›è¡ŒåŠ«æŒçš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å°†åŠ¨æ€è„šæœ¬è¿è¡Œæ—¶çš„ window å¯¹è±¡æ›¿æ¢æˆ proxy ä»£ç†å¯¹è±¡ï¼Œä½¿å­åº”ç”¨åŠ¨æ€æ·»åŠ çš„è„šæœ¬æ–‡ä»¶çš„è¿è¡Œä¸Šä¸‹æ–‡ä¹Ÿæ›¿æ¢æˆå­åº”ç”¨è‡ªèº«ã€‚</p><p>HTMLHeadElement.prototype.removeChild çš„é€»è¾‘å°±æ˜¯å¤šåŠ äº†ä¸ªå­åº”ç”¨å®¹å™¨åˆ¤æ–­ï¼Œå…¶ä»–æ— å¼‚ï¼Œå°±ä¸å±•å¼€è¯´äº†ã€‚</p><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹ free å‡½æ•°ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/patchDynamicAppend-free.1ov6zkl8yb.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™ä¸ª free å‡½æ•°ä¸å…¶ä»–çš„ patchesï¼ˆåŠ«æŒå‡½æ•°ï¼‰ å®ç°ä¸å¤ªä¸€æ ·ï¼Œè¿™é‡Œç¼“å­˜äº†ä¸€ä»½ cssRulesï¼Œåœ¨é‡æ–°æŒ‚è½½çš„æ—¶å€™ä¼šæ‰§è¡Œ rebuild å‡½æ•°å°†å…¶è¿˜åŸã€‚ è¿™æ˜¯å› ä¸ºæ ·å¼å…ƒç´  DOM ä»æ–‡æ¡£ä¸­åˆ é™¤åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ¸…é™¤æ ·å¼å…ƒç´ è¡¨ã€‚å¦‚æœä¸è¿™ä¹ˆåšçš„è¯ï¼Œåœ¨é‡æ–°æŒ‚è½½æ—¶ä¼šå‡ºç°å­˜åœ¨ style æ ‡ç­¾ï¼Œä½†æ˜¯æ²¡æœ‰æ¸²æŸ“æ ·å¼çš„é—®é¢˜ã€‚</p><h2 id="å¸è½½æ²™ç®±-unmountsandbox" tabindex="-1"><a class="header-anchor" href="#å¸è½½æ²™ç®±-unmountsandbox"><span>å¸è½½æ²™ç®± - unmountSandbox</span></a></h2><p>æˆ‘ä»¬å†å›åˆ° mount å‡½æ•°æœ¬èº«ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount.4xuaw88qki.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨ patchAtMounting å‡½æ•°ä¸­åŠ«æŒäº†å„ç±»å…¨å±€ç›‘å¬ï¼Œå¹¶è¿”å›äº†è§£é™¤åŠ«æŒçš„ free å‡½æ•°ã€‚åœ¨å¸è½½åº”ç”¨æ—¶è°ƒç”¨ free å‡½æ•°è§£é™¤è¿™äº›å…¨å±€ç›‘å¬çš„åŠ«æŒè¡Œä¸ºï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/unmount.3raznmju19.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ° sideEffectsRebuilders åœ¨ free åè¢«è¿”å›ï¼Œåœ¨ mount çš„æ—¶å€™åˆå°†è¢«è°ƒç”¨ rebuild é‡å»ºåŠ¨æ€æ ·å¼è¡¨ã€‚è¿™å—ç¯ç¯ç›¸æ‰£ï¼Œæ˜¯ç¨å¾®æœ‰ç‚¹ç»•ï¼Œæ²¡å¤ªçœ‹æ˜ç™½çš„åŒå­¦å¯ä»¥ç¿»ä¸Šå»å†çœ‹ä¸€éã€‚</p><p>åˆ°è¿™é‡Œï¼Œqiankun çš„æœ€æ ¸å¿ƒéƒ¨åˆ†-æ²™ç®±æœºåˆ¶ï¼Œæˆ‘ä»¬å°±å·²ç»è§£æå®Œæ¯•äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å‰–æåˆ«çš„éƒ¨åˆ†ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘ä»¬ç”»ä¸€å¼ å›¾ï¼Œå¯¹æ²™ç®±çš„åˆ›å»ºè¿‡ç¨‹è¿›è¡Œä¸€ä¸ªæ€»æ¢³ç†ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/sandboxLifeCycle.2krof0uxfa.webp" alt="" height="600" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="æ³¨å†Œå†…éƒ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ³¨å†Œå†…éƒ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><span>æ³¨å†Œå†…éƒ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></a></h3><p>åœ¨åˆ›å»ºå¥½äº†æ²™ç®±ç¯å¢ƒåï¼Œåœ¨ ç¬¬ 100~106 è¡Œ æ³¨å†Œäº†ä¸€äº›å†…éƒ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycles.8z6aamctxa.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨ä¸Šå›¾ä¸­ï¼Œç¬¬ 106 è¡Œ çš„ mergeWith æ–¹æ³•çš„ä½œç”¨æ˜¯å°†å†…ç½®çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ä¼ å…¥çš„ lifeCycles ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p><blockquote><p>è¿™é‡Œçš„ lifeCycles ç”Ÿå‘½å‘¨æœŸå‡½æ•°æŒ‡çš„æ˜¯å…¨å­åº”ç”¨å…±äº«çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå¯ç”¨äºæ‰§è¡Œå¤šä¸ªå­åº”ç”¨é—´ç›¸åŒçš„é€»è¾‘æ“ä½œï¼Œä¾‹å¦‚ åŠ è½½æ•ˆæœ ä¹‹ç±»çš„ã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p></blockquote><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/registerMicroAppsLoading.6pn9r4s3hu.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é™¤äº†å¤–éƒ¨ä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…³æ³¨ qiankun å†…ç½®çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åšäº†äº›ä»€ä¹ˆï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/getAddOn.4ckn9xea8u.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬å¯¹ä¸Šå›¾çš„ä»£ç è¿›è¡Œé€ä¸€è§£æï¼š</p><ul><li>ç¬¬ 13~15 è¡Œï¼šåœ¨åŠ è½½å­åº”ç”¨å‰ beforeLoadï¼ˆåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼‰æ—¶æ³¨å…¥ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼ŒæŒ‡ç¤ºäº†å­åº”ç”¨çš„ public è·¯å¾„ã€‚</li><li>ç¬¬ 17~19 è¡Œï¼šåœ¨æŒ‚è½½å­åº”ç”¨å‰ beforeMountï¼ˆå¯èƒ½ä¼šå¤šæ¬¡æ‰§è¡Œï¼‰æ—¶å¯èƒ½ä¹Ÿä¼šæ³¨å…¥è¯¥ç¯å¢ƒå˜é‡ã€‚</li><li>ç¬¬ 23~30 è¡Œï¼šåœ¨å¸è½½å­åº”ç”¨å‰ beforeUnmount æ—¶å°†ç¯å¢ƒå˜é‡è¿˜åŸåˆ°åŸå§‹çŠ¶æ€ã€‚</li></ul><p>é€šè¿‡ä¸Šé¢çš„åˆ†ææˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å­åº”ç”¨ä¸­è·å–è¯¥ç¯å¢ƒå˜é‡ï¼Œå°†å…¶è®¾ç½®ä¸º <strong>webpack_public_path</strong> çš„å€¼ï¼Œä»è€Œä½¿å­åº”ç”¨åœ¨ä¸»åº”ç”¨ä¸­è¿è¡Œæ—¶ï¼Œå¯ä»¥åŒ¹é…æ­£ç¡®çš„èµ„æºè·¯å¾„ã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/isInContainer.2ruwagh2sl.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="è§¦å‘-beforeload-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#è§¦å‘-beforeload-ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"><span>è§¦å‘ beforeLoad ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</span></a></h3><p>åœ¨æ³¨å†Œå®Œäº†ç”Ÿå‘½å‘¨æœŸå‡½æ•°åï¼Œç«‹å³è§¦å‘äº† beforeLoad ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/beforeLoad.5mnkg8w9j0.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨ ç¬¬ 108 è¡Œ ä¸­ï¼Œè§¦å‘äº† beforeLoad ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚</p><p>éšåï¼Œåœ¨ ç¬¬ 110 è¡Œ æ‰§è¡Œäº† import-html-entry çš„ execScripts æ–¹æ³•ã€‚æŒ‡å®šäº†è„šæœ¬æ–‡ä»¶çš„è¿è¡Œæ²™ç®±ï¼ˆjsSandboxï¼‰ï¼Œæ‰§è¡Œå®Œå­åº”ç”¨çš„è„šæœ¬æ–‡ä»¶åï¼Œè¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åŒ…å«äº†å­åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/proxyLastOptions.4qr30sml5z.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨ ç¬¬ 112~121 è¡Œ å¯¹å­åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°åšäº†ä¸ªæ£€æµ‹ï¼Œå¦‚æœåœ¨å­åº”ç”¨çš„å¯¼å‡ºå¯¹è±¡ä¸­æ²¡æœ‰å‘ç°ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¼šåœ¨æ²™ç®±å¯¹è±¡ä¸­ç»§ç»­æŸ¥æ‰¾ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚å¦‚æœæœ€åæ²¡æœ‰æ‰¾åˆ°ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å­åº”ç”¨ä¸€å®šè¦æœ‰ bootstrap, mount, unmount è¿™ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°æ‰èƒ½è¢« qiankun æ­£ç¡®åµŒå…¥åˆ°ä¸»åº”ç”¨ä¸­ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ç”»ä¸€å¼ å›¾ï¼Œå¯¹å­åº”ç”¨æŒ‚è½½å‰çš„åˆå§‹åŒ–è¿‡ç¨‹åšä¸€ä¸ªæ€»æ¢³ç†ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/beforeMountFlow.3nrdpwqr7k.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="è¿›å…¥åˆ°-mount-æŒ‚è½½æµç¨‹" tabindex="-1"><a class="header-anchor" href="#è¿›å…¥åˆ°-mount-æŒ‚è½½æµç¨‹"><span>è¿›å…¥åˆ° mount æŒ‚è½½æµç¨‹</span></a></h3><p>åœ¨ä¸€äº›åˆå§‹åŒ–é…ç½®ï¼ˆå¦‚ å­åº”ç”¨èµ„æºã€è¿è¡Œæ²™ç®±ç¯å¢ƒã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ç­‰ç­‰ï¼‰å‡†å¤‡å°±ç»ªåï¼Œqiankun å†…éƒ¨å°†å…¶ç»„è£…åœ¨ä¸€èµ·ï¼Œè¿”å›äº†ä¸‰ä¸ªå‡½æ•°ä½œä¸º single-spa å†…éƒ¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p><p>single-spa å†…éƒ¨çš„é€»è¾‘æˆ‘ä»¬åé¢å†å±•å¼€è¯´ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸º single-spa å†…éƒ¨çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼š</p><ul><li>bootstrapï¼šå­åº”ç”¨åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼Œåªä¼šè°ƒç”¨ä¸€æ¬¡ï¼›</li><li>mountï¼šå­åº”ç”¨æŒ‚è½½æ—¶è°ƒç”¨ï¼Œå¯èƒ½ä¼šè°ƒç”¨å¤šæ¬¡ï¼›</li><li>unmountï¼šå­åº”ç”¨å¸è½½æ—¶è°ƒç”¨ï¼Œå¯èƒ½ä¼šè°ƒç”¨å¤šæ¬¡ï¼›</li></ul><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨ bootstrap é˜¶æ®µè°ƒç”¨äº†å­åº”ç”¨æš´éœ²çš„ bootstrap ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œå¯¹ mount é˜¶æ®µè¿›è¡Œå±•å¼€ï¼Œçœ‹çœ‹åœ¨å­åº”ç”¨ mount é˜¶æ®µæ‰§è¡Œäº†å“ªäº›å‡½æ•°ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount1.8vmocwjr7p.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æˆ‘ä»¬è¿›è¡Œé€è¡Œè§£æï¼š</p><ul><li>ç¬¬ 127~133 è¡Œï¼šå¯¹å•å®ä¾‹æ¨¡å¼è¿›è¡Œæ£€æµ‹ã€‚åœ¨å•å®ä¾‹æ¨¡å¼ä¸‹ï¼Œæ–°çš„å­åº”ç”¨æŒ‚è½½è¡Œä¸ºä¼šåœ¨æ—§çš„å­åº”ç”¨å¸è½½ä¹‹åæ‰å¼€å§‹ã€‚ï¼ˆç”±äºè¿™é‡Œæ˜¯ä¸²è¡Œé¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥å¦‚æœæŸä¸€å¤„å‘ç”Ÿé˜»å¡çš„è¯ï¼Œä¼šé˜»å¡æ‰€æœ‰åç»­çš„å‡½æ•°æ‰§è¡Œï¼‰</li><li>ç¬¬ 134 è¡Œï¼šæ‰§è¡Œæ³¨å†Œå­åº”ç”¨æ—¶ä¼ å…¥çš„ render å‡½æ•°ï¼Œå°† HTML Template å’Œ loading ä½œä¸ºå…¥å‚ã€‚è¿™é‡Œä¸€èˆ¬æ˜¯åœ¨å‘ç”Ÿäº†ä¸€æ¬¡ unmount åï¼Œå†æ¬¡è¿›è¡Œ mount æŒ‚è½½è¡Œä¸ºæ—¶å°† HTML æŒ‚è½½åœ¨æŒ‡å®šå®¹å™¨ä¸­ï¼ˆè§ä¸‹å›¾ï¼‰</li></ul><blockquote><p>ç”±äºåˆå§‹åŒ–çš„æ—¶å€™å·²ç»è°ƒç”¨è¿‡ä¸€æ¬¡ renderï¼Œæ‰€ä»¥åœ¨é¦–æ¬¡è°ƒç”¨ mount æ—¶å¯èƒ½å·²ç»æ‰§è¡Œè¿‡ä¸€æ¬¡ render æ–¹æ³•ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ä¹Ÿæœ‰å¯¹é‡å¤æŒ‚è½½çš„æƒ…å†µè¿›è¡Œåˆ¤æ–­çš„è¯­å¥ - if (frame.querySelector(&quot;div&quot;) === nullï¼Œé˜²æ­¢é‡å¤æŒ‚è½½å­åº”ç”¨ã€‚</p></blockquote><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mountedApp.lvhoopf2i.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>ç¬¬ 135 è¡Œï¼šè§¦å‘äº† beforeMount å…¨å±€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼›</li><li>ç¬¬ 136 è¡Œï¼šæŒ‚è½½æ²™ç®±ï¼Œè¿™ä¸€æ­¥ä¸­æ¿€æ´»äº†å¯¹åº”çš„å­åº”ç”¨æ²™ç®±ï¼ŒåŠ«æŒäº†éƒ¨åˆ†å…¨å±€ç›‘å¬ï¼ˆå¦‚ setIntervalï¼‰ã€‚æ­¤æ—¶å¼€å§‹å­åº”ç”¨çš„ä»£ç å°†åœ¨æ²™ç®±ä¸­è¿è¡Œã€‚ï¼ˆåæ¨å¯çŸ¥ï¼Œåœ¨ beforeMount å‰çš„éƒ¨åˆ†å…¨å±€æ“ä½œå°†ä¼šå¯¹ä¸»åº”ç”¨é€ æˆæ±¡æŸ“ï¼Œå¦‚ setIntervalï¼‰</li><li>ç¬¬ 137 è¡Œï¼šè§¦å‘å­åº”ç”¨çš„ mount ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œåœ¨è¿™ä¸€æ­¥é€šå¸¸æ˜¯æ‰§è¡Œå¯¹åº”çš„å­åº”ç”¨çš„æŒ‚è½½æ“ä½œï¼ˆå¦‚ ReactDOM.renderã€Vue.$mountã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</li></ul><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/mount2.9dcq1hl4so.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>ç¬¬ 138 è¡Œï¼šå†æ¬¡è°ƒç”¨ render å‡½æ•°ï¼Œæ­¤æ—¶ loading å‚æ•°ä¸º falseï¼Œä»£è¡¨å­åº”ç”¨å·²ç»åŠ è½½å®Œæˆã€‚</li><li>ç¬¬ 139 è¡Œï¼šè§¦å‘äº† afterMount å…¨å±€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼›</li><li>ç¬¬ 140~144 è¡Œï¼šåœ¨å•å®ä¾‹æ¨¡å¼ä¸‹è®¾ç½® prevAppUnmountedDeferred çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸€ä¸ª promiseï¼Œåœ¨å½“å‰å­åº”ç”¨å¸è½½æ—¶æ‰ä¼šè¢« resolveï¼Œåœ¨è¯¥å­åº”ç”¨è¿è¡ŒæœŸé—´ä¼šé˜»å¡å…¶ä»–å­åº”ç”¨çš„æŒ‚è½½åŠ¨ä½œï¼ˆç¬¬ 134 è¡Œï¼‰ï¼›</li></ul><p>æˆ‘ä»¬åœ¨ä¸Šé¢å¾ˆè¯¦ç»†çš„å‰–æäº†æ•´ä¸ªå­åº”ç”¨çš„ mount æŒ‚è½½æµç¨‹ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ææ‡‚çš„è¯ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬å†ç”»ä¸€ä¸ªæµç¨‹å›¾æ¥å¸®åŠ©ç†è§£ã€‚ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-mount.9dcq1hl4s9.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="è¿›å…¥åˆ°-unmount-å¸è½½æµç¨‹" tabindex="-1"><a class="header-anchor" href="#è¿›å…¥åˆ°-unmount-å¸è½½æµç¨‹"><span>è¿›å…¥åˆ° unmount å¸è½½æµç¨‹</span></a></h3><p>æˆ‘ä»¬åˆšæ‰æ¢³ç†äº†å­åº”ç”¨çš„ mount æŒ‚è½½æµç¨‹ï¼Œæˆ‘ä»¬ç°åœ¨å°±è¿›å…¥åˆ°å­åº”ç”¨çš„ unmount å¸è½½æµç¨‹ã€‚åœ¨å­åº”ç”¨æ¿€æ´»é˜¶æ®µï¼Œ activeRule æœªå‘½ä¸­æ—¶å°†ä¼šè§¦å‘ unmount å¸è½½è¡Œä¸ºï¼Œå…·ä½“çš„è¡Œä¸ºå¦‚ä¸‹ï¼ˆè§ä¸‹å›¾ï¼‰</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/unmount1.6t6voul68g.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œunmount å¸è½½æµç¨‹è¦æ¯” mount ç®€å•å¾ˆå¤šï¼Œæˆ‘ä»¬ç›´æ¥æ¥æ¢³ç†ä¸€ä¸‹ï¼š</p><ul><li>ç¬¬ 148 è¡Œï¼šè§¦å‘äº† beforeUnmount å…¨å±€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼›</li><li>ç¬¬ 149 è¡Œï¼šè¿™é‡Œä¸ mount æµç¨‹çš„é¡ºåºç¨å¾®æœ‰ç‚¹ä¸åŒï¼Œè¿™é‡Œå…ˆæ‰§è¡Œäº†å­åº”ç”¨çš„ unmount ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¿è¯å­åº”ç”¨ä»ç„¶æ˜¯è¿è¡Œåœ¨æ²™ç®±å†…ï¼Œé¿å…é€ æˆçŠ¶æ€æ±¡æŸ“ã€‚åœ¨è¿™é‡Œä¸€èˆ¬æ˜¯å¯¹å­åº”ç”¨çš„ä¸€äº›çŠ¶æ€è¿›è¡Œæ¸…ç†å’Œå¸è½½æ“ä½œã€‚</li><li>ç¬¬ 150 è¡Œï¼šå¸è½½æ²™ç®±ï¼Œå…³é—­äº†æ²™ç®±çš„æ¿€æ´»çŠ¶æ€ã€‚</li><li>ç¬¬ 151 è¡Œï¼šè§¦å‘äº† afterUnmount å…¨å±€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼›</li><li>ç¬¬ 152 è¡Œï¼šè§¦å‘ render æ–¹æ³•ï¼Œå¹¶ä¸”ä¼ å…¥çš„ appContent ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œæ­¤å¤„å¯ä»¥æ¸…ç©ºä¸»åº”ç”¨å®¹å™¨å†…çš„å†…å®¹ã€‚</li><li>ç¬¬ 153~156 è¡Œï¼šå½“å‰å­åº”ç”¨å¸è½½å®Œæˆåï¼Œåœ¨å•å®ä¾‹æ¨¡å¼ä¸‹è§¦å‘ prevAppUnmountedDeferred.resolve()ï¼Œä½¿å…¶ä»–å­åº”ç”¨çš„æŒ‚è½½è¡Œä¸ºå¾—ä»¥ç»§ç»­è¿›è¡Œï¼Œä¸å†é˜»å¡ã€‚</li></ul><p>æˆ‘ä»¬å¯¹ unmount å¸è½½æµç¨‹ä¹Ÿç”»ä¸€å¼ å›¾ï¼Œå¸®åŠ©å¤§å®¶ç†è§£ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-unmount.4jnv5d0fp9.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h2><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ qiankun æ¡†æ¶çš„æ€»æµç¨‹æ¢³ç†å°±å·®ä¸å¤šäº†ã€‚è¿™é‡Œåº”è¯¥åšä¸ªæ€»ç»“ï¼Œå¤§å®¶çœ‹äº†è¿™ä¹ˆå¤šæ–‡å­—ï¼Œä¼°è®¡å¤§å®¶ä¹Ÿçœ‹ç´¯äº†ï¼Œæœ€åç”¨ä¸€å¼ å›¾å¯¹ qiankun çš„æ€»æµç¨‹è¿›è¡Œæ€»ç»“å§ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-flow.2obacqo035.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="å½©è›‹" tabindex="-1"><a class="header-anchor" href="#å½©è›‹"><span>å½©è›‹</span></a></h2><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/deleteProperty.2dogjl8rwi.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="å±•æœ›" tabindex="-1"><a class="header-anchor" href="#å±•æœ›"><span>å±•æœ›</span></a></h2><p>ä¼ ç»Ÿçš„äº‘æ§åˆ¶å°åº”ç”¨ï¼Œå‡ ä¹éƒ½ä¼šé¢ä¸´ä¸šåŠ¡å¿«é€Ÿå‘å±•ä¹‹åï¼Œå•ä½“åº”ç”¨è¿›åŒ–æˆå·¨çŸ³åº”ç”¨çš„é—®é¢˜ã€‚æˆ‘ä»¬è¦å¦‚ä½•ç»´æŠ¤ä¸€ä¸ªå·¨æ— éœ¸ä¸­å°åº”ç”¨ï¼Ÿ</p><p>ä¸Šé¢è¿™ä¸ªé—®é¢˜å¼•å‡ºäº†å¾®å‰ç«¯æ¶æ„ç†å¿µï¼Œæ‰€ä»¥å¾®å‰ç«¯çš„æ¦‚å¿µä¹Ÿè¶Šæ¥è¶Šç«ï¼Œæˆ‘ä»¬å›¢é˜Ÿæœ€è¿‘ä¹Ÿåœ¨å°è¯•è½¬å‹å¾®å‰ç«¯æ¶æ„ã€‚</p><p>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæ‰€ä»¥é’ˆå¯¹ qiankun çš„æºç è¿›è¡Œè§£è¯»ï¼Œåœ¨åˆ†äº«çŸ¥è¯†çš„åŒæ—¶ä¹Ÿæ˜¯å¸®åŠ©è‡ªå·±ç†è§£ã€‚</p><figure><img src="https://shaohui-jin.github.io/picx-images-hosting/blog/QianKun/lifeCycle-info.5c0qn3h1fa.webp" alt="" width="800" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/shaohui-jin/shaohui-jin.github.io/edit/main/src/zh/Interview/Micro/QianKun.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 1051131737@qq.com">shaohui_jin</span><!--]--><!--]--></div></div></footer><!----><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2024 çŸ³æ€œå®‰ </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CFXHzI0x.js" defer></script>
  </body>
</html>
