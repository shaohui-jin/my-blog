<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://jin-shaohui.gitee.io/Nginx/Core/"><meta property="og:site_name" content="ç¹åä¸­è‡ªå¾‹ï¼Œè½é­„ä¸­è‡ªæ„ˆ"><meta property="og:title" content="nginxå†…æ ¸æ¨¡å—"><meta property="og:description" content="å†…æ ¸æ¨¡å—ç”¨äºæ§åˆ¶ nginxæœåŠ¡å™¨ çš„åŸºæœ¬åŠŸèƒ½ï¼Œå†…æ ¸å‚æ•°çš„ä¿®æ”¹éœ€è¦é‡æ–°å¯åŠ¨nginxæ‰èƒ½ç”Ÿæ•ˆï¼Ÿï¼Ÿï¼Ÿ ç”¨äºè°ƒè¯•è¿›ç¨‹ï¼Œå®šä½é—®é¢˜çš„é…ç½®é¡¹ daemon æ˜¯å¦ä»¥ å®ˆæŠ¤è¿›ç¨‹ æ–¹å¼å¯åŠ¨nginx è¯­æ³•ï¼š daemon on|off; é»˜è®¤ï¼š daemon on; å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ æ˜¯ è„±ç¦»ç»ˆç«¯ å¹¶ä¸”åœ¨ åå°è¿è¡Œ çš„è¿›ç¨‹ã€‚ å®ƒè„±ç¦»ç»ˆç«¯æ˜¯ä¸ºäº†é¿å…è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯åœ¨ä»»ä½•ç»ˆç«¯ä¸Šæ˜¾ç¤ºï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¿›ç¨‹ä¹Ÿä¸ä¼šè¢«ä»»ä½•ç»ˆç«¯æ‰€äº§ç”Ÿçš„ä¿¡æ¯æ‰€æ‰“æ–­ã€‚ nginxæ¯«æ— ç–‘é—®æ˜¯ä¸€ä¸ªéœ€è¦ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œçš„æœåŠ¡ï¼Œå› æ­¤ï¼Œé»˜è®¤ éƒ½æ˜¯ä»¥è¿™ç§æ–¹å¼è¿è¡Œçš„ã€‚ ä¸è¿‡ nginx è¿˜æ˜¯æä¾›äº† å…³é—­ å®ˆæŠ¤è¿›ç¨‹çš„æ¨¡å¼ï¼Œä¹‹æ‰€ä»¥æä¾›è¿™ç§æ¨¡å¼ï¼Œæ˜¯ä¸ºäº† æ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•nginxï¼Œæ¯•ç«Ÿç”¨ gdbLinuxå¸¸ç”¨çš„ç¨‹åºè°ƒè¯•å™¨ è°ƒè¯•è¿›ç¨‹æ—¶æœ€çƒ¦ççš„å°±æ˜¯å¦‚ä½•ç»§ç»­è·Ÿè¿›forkå‡ºçš„å­è¿›ç¨‹äº†ã€‚"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-14T09:02:01.000Z"><meta property="article:tag" content="nginx"><meta property="article:published_time" content="2023-06-20T10:04:14.000Z"><meta property="article:modified_time" content="2023-08-14T09:02:01.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"nginxå†…æ ¸æ¨¡å—","image":[""],"datePublished":"2023-06-20T10:04:14.000Z","dateModified":"2023-08-14T09:02:01.000Z","author":[]}</script><link rel="javascript" href="https://cdn.bootcdn.net/ajax/libs/view-design/4.7.0/iview.js"><meta name="baidu-site-verification" content="nGf5yi0Gec"><link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#5c92d1"><title>nginxå†…æ ¸æ¨¡å— | ç¹åä¸­è‡ªå¾‹ï¼Œè½é­„ä¸­è‡ªæ„ˆ</title><meta name="description" content="å†…æ ¸æ¨¡å—ç”¨äºæ§åˆ¶ nginxæœåŠ¡å™¨ çš„åŸºæœ¬åŠŸèƒ½ï¼Œå†…æ ¸å‚æ•°çš„ä¿®æ”¹éœ€è¦é‡æ–°å¯åŠ¨nginxæ‰èƒ½ç”Ÿæ•ˆï¼Ÿï¼Ÿï¼Ÿ ç”¨äºè°ƒè¯•è¿›ç¨‹ï¼Œå®šä½é—®é¢˜çš„é…ç½®é¡¹ daemon æ˜¯å¦ä»¥ å®ˆæŠ¤è¿›ç¨‹ æ–¹å¼å¯åŠ¨nginx è¯­æ³•ï¼š daemon on|off; é»˜è®¤ï¼š daemon on; å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ æ˜¯ è„±ç¦»ç»ˆç«¯ å¹¶ä¸”åœ¨ åå°è¿è¡Œ çš„è¿›ç¨‹ã€‚ å®ƒè„±ç¦»ç»ˆç«¯æ˜¯ä¸ºäº†é¿å…è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯åœ¨ä»»ä½•ç»ˆç«¯ä¸Šæ˜¾ç¤ºï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¿›ç¨‹ä¹Ÿä¸ä¼šè¢«ä»»ä½•ç»ˆç«¯æ‰€äº§ç”Ÿçš„ä¿¡æ¯æ‰€æ‰“æ–­ã€‚ nginxæ¯«æ— ç–‘é—®æ˜¯ä¸€ä¸ªéœ€è¦ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œçš„æœåŠ¡ï¼Œå› æ­¤ï¼Œé»˜è®¤ éƒ½æ˜¯ä»¥è¿™ç§æ–¹å¼è¿è¡Œçš„ã€‚ ä¸è¿‡ nginx è¿˜æ˜¯æä¾›äº† å…³é—­ å®ˆæŠ¤è¿›ç¨‹çš„æ¨¡å¼ï¼Œä¹‹æ‰€ä»¥æä¾›è¿™ç§æ¨¡å¼ï¼Œæ˜¯ä¸ºäº† æ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•nginxï¼Œæ¯•ç«Ÿç”¨ gdbLinuxå¸¸ç”¨çš„ç¨‹åºè°ƒè¯•å™¨ è°ƒè¯•è¿›ç¨‹æ—¶æœ€çƒ¦ççš„å°±æ˜¯å¦‚ä½•ç»§ç»­è·Ÿè¿›forkå‡ºçš„å­è¿›ç¨‹äº†ã€‚">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-2df610de.css" as="style"><link rel="stylesheet" href="/assets/style-2df610de.css">
    <link rel="modulepreload" href="/assets/app-f1563afd.js"><link rel="modulepreload" href="/assets/framework-990fb3f1.js"><link rel="modulepreload" href="/assets/index.html-2075e135.js"><link rel="modulepreload" href="/assets/index.html-a8b6886c.js"><link rel="prefetch" href="/assets/index.html-1e513b31.js" as="script"><link rel="prefetch" href="/assets/index.html-729d625d.js" as="script"><link rel="prefetch" href="/assets/index.html-9877cc06.js" as="script"><link rel="prefetch" href="/assets/index.html-96393aae.js" as="script"><link rel="prefetch" href="/assets/index.html-2371620e.js" as="script"><link rel="prefetch" href="/assets/index.html-d2b14b0b.js" as="script"><link rel="prefetch" href="/assets/index.html-2c330bc6.js" as="script"><link rel="prefetch" href="/assets/index.html-757aa2e0.js" as="script"><link rel="prefetch" href="/assets/index.html-960531ec.js" as="script"><link rel="prefetch" href="/assets/index.html-95b83344.js" as="script"><link rel="prefetch" href="/assets/index.html-b1cd39fe.js" as="script"><link rel="prefetch" href="/assets/index.html-bcd38fac.js" as="script"><link rel="prefetch" href="/assets/index.html-62e17b6e.js" as="script"><link rel="prefetch" href="/assets/index.html-e09e680e.js" as="script"><link rel="prefetch" href="/assets/index.html-fd35fa7c.js" as="script"><link rel="prefetch" href="/assets/index.html-aef1ff7a.js" as="script"><link rel="prefetch" href="/assets/index.html-46286061.js" as="script"><link rel="prefetch" href="/assets/index.html-dd5ecb18.js" as="script"><link rel="prefetch" href="/assets/index.html-8fe47d9c.js" as="script"><link rel="prefetch" href="/assets/index.html-8405d196.js" as="script"><link rel="prefetch" href="/assets/index.html-1c2b2311.js" as="script"><link rel="prefetch" href="/assets/index.html-0e7d6971.js" as="script"><link rel="prefetch" href="/assets/index.html-480d6bc7.js" as="script"><link rel="prefetch" href="/assets/index.html-196568ba.js" as="script"><link rel="prefetch" href="/assets/index.html-844f5c17.js" as="script"><link rel="prefetch" href="/assets/index.html-a0bbb823.js" as="script"><link rel="prefetch" href="/assets/index.html-d0b90e7f.js" as="script"><link rel="prefetch" href="/assets/index.html-f17d85d5.js" as="script"><link rel="prefetch" href="/assets/index.html-7817e292.js" as="script"><link rel="prefetch" href="/assets/index.html-3b8e8810.js" as="script"><link rel="prefetch" href="/assets/index.html-6f20edb4.js" as="script"><link rel="prefetch" href="/assets/index.html-05c30978.js" as="script"><link rel="prefetch" href="/assets/index.html-1c22021e.js" as="script"><link rel="prefetch" href="/assets/index.html-b3177854.js" as="script"><link rel="prefetch" href="/assets/index.html-4b1bfcf6.js" as="script"><link rel="prefetch" href="/assets/index.html-eaf66bc5.js" as="script"><link rel="prefetch" href="/assets/index.html-7319438d.js" as="script"><link rel="prefetch" href="/assets/index.html-6bc45dc7.js" as="script"><link rel="prefetch" href="/assets/index.html-e318efff.js" as="script"><link rel="prefetch" href="/assets/index.html-b94854ad.js" as="script"><link rel="prefetch" href="/assets/index.html-131c0029.js" as="script"><link rel="prefetch" href="/assets/index.html-442f913c.js" as="script"><link rel="prefetch" href="/assets/index.html-a1af7a23.js" as="script"><link rel="prefetch" href="/assets/index.html-729e9453.js" as="script"><link rel="prefetch" href="/assets/index.html-07b92b18.js" as="script"><link rel="prefetch" href="/assets/index.html-a28c02ec.js" as="script"><link rel="prefetch" href="/assets/index.html-3c23a879.js" as="script"><link rel="prefetch" href="/assets/index.html-f288e16a.js" as="script"><link rel="prefetch" href="/assets/index.html-3c979da5.js" as="script"><link rel="prefetch" href="/assets/index.html-1cd15a9d.js" as="script"><link rel="prefetch" href="/assets/index.html-645dc9a6.js" as="script"><link rel="prefetch" href="/assets/index.html-b5c96b8d.js" as="script"><link rel="prefetch" href="/assets/index.html-8218f01c.js" as="script"><link rel="prefetch" href="/assets/index.html-0e843f4c.js" as="script"><link rel="prefetch" href="/assets/404.html-0518cefb.js" as="script"><link rel="prefetch" href="/assets/index.html-08117e78.js" as="script"><link rel="prefetch" href="/assets/index.html-4cc7351b.js" as="script"><link rel="prefetch" href="/assets/index.html-4b7ae0d9.js" as="script"><link rel="prefetch" href="/assets/index.html-21a000c0.js" as="script"><link rel="prefetch" href="/assets/index.html-8b62139d.js" as="script"><link rel="prefetch" href="/assets/index.html-dba505b0.js" as="script"><link rel="prefetch" href="/assets/index.html-f6fafe7d.js" as="script"><link rel="prefetch" href="/assets/index.html-175ac3d9.js" as="script"><link rel="prefetch" href="/assets/index.html-e9aa6cbf.js" as="script"><link rel="prefetch" href="/assets/index.html-343164ed.js" as="script"><link rel="prefetch" href="/assets/index.html-340a4ba8.js" as="script"><link rel="prefetch" href="/assets/index.html-8802decc.js" as="script"><link rel="prefetch" href="/assets/index.html-aa95548b.js" as="script"><link rel="prefetch" href="/assets/index.html-186c5193.js" as="script"><link rel="prefetch" href="/assets/index.html-52616edf.js" as="script"><link rel="prefetch" href="/assets/index.html-01daed64.js" as="script"><link rel="prefetch" href="/assets/index.html-cee3217d.js" as="script"><link rel="prefetch" href="/assets/index.html-d72ca7e4.js" as="script"><link rel="prefetch" href="/assets/index.html-153192d5.js" as="script"><link rel="prefetch" href="/assets/index.html-bb58acb1.js" as="script"><link rel="prefetch" href="/assets/index.html-d202f39a.js" as="script"><link rel="prefetch" href="/assets/index.html-7983da31.js" as="script"><link rel="prefetch" href="/assets/index.html-961e199c.js" as="script"><link rel="prefetch" href="/assets/index.html-7cfc7697.js" as="script"><link rel="prefetch" href="/assets/index.html-f8a3e5e5.js" as="script"><link rel="prefetch" href="/assets/index.html-de0aa9d0.js" as="script"><link rel="prefetch" href="/assets/index.html-2d22a982.js" as="script"><link rel="prefetch" href="/assets/index.html-968cea3e.js" as="script"><link rel="prefetch" href="/assets/index.html-d8acad0c.js" as="script"><link rel="prefetch" href="/assets/index.html-fbafbffd.js" as="script"><link rel="prefetch" href="/assets/index.html-4d41b2ee.js" as="script"><link rel="prefetch" href="/assets/index.html-20fa854c.js" as="script"><link rel="prefetch" href="/assets/index.html-aba93901.js" as="script"><link rel="prefetch" href="/assets/index.html-1c6f89e0.js" as="script"><link rel="prefetch" href="/assets/index.html-ea4d2af3.js" as="script"><link rel="prefetch" href="/assets/index.html-9baacae8.js" as="script"><link rel="prefetch" href="/assets/index.html-7395c5fb.js" as="script"><link rel="prefetch" href="/assets/index.html-4a984ff4.js" as="script"><link rel="prefetch" href="/assets/index.html-5faf5a5d.js" as="script"><link rel="prefetch" href="/assets/index.html-73e0c3eb.js" as="script"><link rel="prefetch" href="/assets/index.html-4e9c8132.js" as="script"><link rel="prefetch" href="/assets/index.html-57ac01c7.js" as="script"><link rel="prefetch" href="/assets/index.html-47a76a2f.js" as="script"><link rel="prefetch" href="/assets/index.html-dcbce198.js" as="script"><link rel="prefetch" href="/assets/index.html-b64c26c9.js" as="script"><link rel="prefetch" href="/assets/index.html-9be0e3de.js" as="script"><link rel="prefetch" href="/assets/index.html-c7227697.js" as="script"><link rel="prefetch" href="/assets/index.html-1f924ccb.js" as="script"><link rel="prefetch" href="/assets/index.html-fc592ad8.js" as="script"><link rel="prefetch" href="/assets/index.html-a9df9a56.js" as="script"><link rel="prefetch" href="/assets/index.html-5f7f72de.js" as="script"><link rel="prefetch" href="/assets/index.html-4d3db317.js" as="script"><link rel="prefetch" href="/assets/index.html-5e1175fc.js" as="script"><link rel="prefetch" href="/assets/index.html-508a1123.js" as="script"><link rel="prefetch" href="/assets/index.html-e34419ce.js" as="script"><link rel="prefetch" href="/assets/index.html-ce8eccc7.js" as="script"><link rel="prefetch" href="/assets/index.html-b820eba1.js" as="script"><link rel="prefetch" href="/assets/index.html-7a61ceb9.js" as="script"><link rel="prefetch" href="/assets/index.html-696e1789.js" as="script"><link rel="prefetch" href="/assets/index.html-b71dfc84.js" as="script"><link rel="prefetch" href="/assets/index.html-90c06a63.js" as="script"><link rel="prefetch" href="/assets/index.html-3d2f8777.js" as="script"><link rel="prefetch" href="/assets/index.html-ffd4bd56.js" as="script"><link rel="prefetch" href="/assets/index.html-7c4bff78.js" as="script"><link rel="prefetch" href="/assets/index.html-35699a56.js" as="script"><link rel="prefetch" href="/assets/index.html-7a7c3e53.js" as="script"><link rel="prefetch" href="/assets/index.html-9a3631ee.js" as="script"><link rel="prefetch" href="/assets/index.html-b93f6abe.js" as="script"><link rel="prefetch" href="/assets/index.html-84c3eba6.js" as="script"><link rel="prefetch" href="/assets/index.html-07692f37.js" as="script"><link rel="prefetch" href="/assets/index.html-326f348d.js" as="script"><link rel="prefetch" href="/assets/index.html-868a2f1e.js" as="script"><link rel="prefetch" href="/assets/index.html-5c82e9bf.js" as="script"><link rel="prefetch" href="/assets/index.html-b663bec8.js" as="script"><link rel="prefetch" href="/assets/index.html-b40948d3.js" as="script"><link rel="prefetch" href="/assets/index.html-717710f0.js" as="script"><link rel="prefetch" href="/assets/index.html-7e1db0a4.js" as="script"><link rel="prefetch" href="/assets/index.html-338e058f.js" as="script"><link rel="prefetch" href="/assets/index.html-e41261ed.js" as="script"><link rel="prefetch" href="/assets/index.html-56e790df.js" as="script"><link rel="prefetch" href="/assets/index.html-7d255a4a.js" as="script"><link rel="prefetch" href="/assets/index.html-52f5a14b.js" as="script"><link rel="prefetch" href="/assets/index.html-0e4fd71a.js" as="script"><link rel="prefetch" href="/assets/index.html-e9eadbe2.js" as="script"><link rel="prefetch" href="/assets/index.html-1fc16968.js" as="script"><link rel="prefetch" href="/assets/index.html-469bfc07.js" as="script"><link rel="prefetch" href="/assets/index.html-0b020391.js" as="script"><link rel="prefetch" href="/assets/index.html-8bc108cc.js" as="script"><link rel="prefetch" href="/assets/index.html-2d0bd44b.js" as="script"><link rel="prefetch" href="/assets/index.html-7db9aa9f.js" as="script"><link rel="prefetch" href="/assets/index.html-9890347f.js" as="script"><link rel="prefetch" href="/assets/index.html-15497a10.js" as="script"><link rel="prefetch" href="/assets/index.html-76f6c23a.js" as="script"><link rel="prefetch" href="/assets/index.html-1ab5dd40.js" as="script"><link rel="prefetch" href="/assets/index.html-14972c8b.js" as="script"><link rel="prefetch" href="/assets/index.html-fab546e4.js" as="script"><link rel="prefetch" href="/assets/index.html-9541d2c8.js" as="script"><link rel="prefetch" href="/assets/index.html-5eb1e6f2.js" as="script"><link rel="prefetch" href="/assets/index.html-065446dd.js" as="script"><link rel="prefetch" href="/assets/index.html-cb7f2316.js" as="script"><link rel="prefetch" href="/assets/index.html-618627f0.js" as="script"><link rel="prefetch" href="/assets/index.html-e6fa7dac.js" as="script"><link rel="prefetch" href="/assets/index.html-ac90dd3c.js" as="script"><link rel="prefetch" href="/assets/index.html-e44468ed.js" as="script"><link rel="prefetch" href="/assets/index.html-cb4056ce.js" as="script"><link rel="prefetch" href="/assets/index.html-e5ffedd5.js" as="script"><link rel="prefetch" href="/assets/index.html-e1b8c166.js" as="script"><link rel="prefetch" href="/assets/index.html-048c8ca1.js" as="script"><link rel="prefetch" href="/assets/index.html-545182ee.js" as="script"><link rel="prefetch" href="/assets/index.html-7104b56a.js" as="script"><link rel="prefetch" href="/assets/index.html-b28f6af0.js" as="script"><link rel="prefetch" href="/assets/index.html-7e0f6f2d.js" as="script"><link rel="prefetch" href="/assets/index.html-c9787056.js" as="script"><link rel="prefetch" href="/assets/index.html-387ee62d.js" as="script"><link rel="prefetch" href="/assets/index.html-bd703ef9.js" as="script"><link rel="prefetch" href="/assets/index.html-846983e1.js" as="script"><link rel="prefetch" href="/assets/index.html-6311ba35.js" as="script"><link rel="prefetch" href="/assets/index.html-861ddd7e.js" as="script"><link rel="prefetch" href="/assets/index.html-7e5b42e6.js" as="script"><link rel="prefetch" href="/assets/index.html-4e2aa146.js" as="script"><link rel="prefetch" href="/assets/index.html-b9e48b35.js" as="script"><link rel="prefetch" href="/assets/index.html-b69b26b9.js" as="script"><link rel="prefetch" href="/assets/index.html-fda3e415.js" as="script"><link rel="prefetch" href="/assets/index.html-16c6d605.js" as="script"><link rel="prefetch" href="/assets/index.html-58709936.js" as="script"><link rel="prefetch" href="/assets/index.html-0a3d3873.js" as="script"><link rel="prefetch" href="/assets/404.html-bd56f543.js" as="script"><link rel="prefetch" href="/assets/index.html-a6336204.js" as="script"><link rel="prefetch" href="/assets/index.html-5bceab77.js" as="script"><link rel="prefetch" href="/assets/index.html-22ccb182.js" as="script"><link rel="prefetch" href="/assets/index.html-8a32f424.js" as="script"><link rel="prefetch" href="/assets/index.html-d79e229d.js" as="script"><link rel="prefetch" href="/assets/index.html-2b8e5610.js" as="script"><link rel="prefetch" href="/assets/index.html-c580b91a.js" as="script"><link rel="prefetch" href="/assets/index.html-2e64e735.js" as="script"><link rel="prefetch" href="/assets/index.html-62ad2ff8.js" as="script"><link rel="prefetch" href="/assets/index.html-dc14967e.js" as="script"><link rel="prefetch" href="/assets/index.html-7f95eb67.js" as="script"><link rel="prefetch" href="/assets/index.html-7abb4189.js" as="script"><link rel="prefetch" href="/assets/index.html-f99e1ec7.js" as="script"><link rel="prefetch" href="/assets/index.html-f27e7e27.js" as="script"><link rel="prefetch" href="/assets/index.html-61c48a1b.js" as="script"><link rel="prefetch" href="/assets/index.html-4fdccd81.js" as="script"><link rel="prefetch" href="/assets/index.html-bd9b4ea9.js" as="script"><link rel="prefetch" href="/assets/index.html-1d044ac1.js" as="script"><link rel="prefetch" href="/assets/index.html-0fd39596.js" as="script"><link rel="prefetch" href="/assets/index.html-0989ad17.js" as="script"><link rel="prefetch" href="/assets/index.html-125c6b77.js" as="script"><link rel="prefetch" href="/assets/index.html-d991d64b.js" as="script"><link rel="prefetch" href="/assets/index.html-92189d39.js" as="script"><link rel="prefetch" href="/assets/index.html-aa393e86.js" as="script"><link rel="prefetch" href="/assets/index.html-0812fd96.js" as="script"><link rel="prefetch" href="/assets/index.html-c05fe8d7.js" as="script"><link rel="prefetch" href="/assets/index.html-dc5478f5.js" as="script"><link rel="prefetch" href="/assets/index.html-d512f801.js" as="script"><link rel="prefetch" href="/assets/index.html-9eced420.js" as="script"><link rel="prefetch" href="/assets/index.html-65baecf2.js" as="script"><link rel="prefetch" href="/assets/index.html-832b1b23.js" as="script"><link rel="prefetch" href="/assets/index.html-d8908a1f.js" as="script"><link rel="prefetch" href="/assets/index.html-c797f9b6.js" as="script"><link rel="prefetch" href="/assets/index.html-9d48e23e.js" as="script"><link rel="prefetch" href="/assets/index.html-5e82288a.js" as="script"><link rel="prefetch" href="/assets/index.html-e62b8ef6.js" as="script"><link rel="prefetch" href="/assets/index.html-ca521d83.js" as="script"><link rel="prefetch" href="/assets/index.html-e4e93d45.js" as="script"><link rel="prefetch" href="/assets/index.html-f87bc6a9.js" as="script"><link rel="prefetch" href="/assets/index.html-14ac4f2e.js" as="script"><link rel="prefetch" href="/assets/index.html-7b132081.js" as="script"><link rel="prefetch" href="/assets/index.html-b1a9bb2b.js" as="script"><link rel="prefetch" href="/assets/index.html-afc86f3a.js" as="script"><link rel="prefetch" href="/assets/index.html-63444a3d.js" as="script"><link rel="prefetch" href="/assets/index.html-2cf22ad6.js" as="script"><link rel="prefetch" href="/assets/index.html-25214811.js" as="script"><link rel="prefetch" href="/assets/index.html-4e5dc248.js" as="script"><link rel="prefetch" href="/assets/index.html-1290217c.js" as="script"><link rel="prefetch" href="/assets/index.html-4a8b6c8c.js" as="script"><link rel="prefetch" href="/assets/index.html-f3b4939e.js" as="script"><link rel="prefetch" href="/assets/index.html-d4b2d5f1.js" as="script"><link rel="prefetch" href="/assets/index.html-01667651.js" as="script"><link rel="prefetch" href="/assets/index.html-d41d02fa.js" as="script"><link rel="prefetch" href="/assets/index.html-14c0ae81.js" as="script"><link rel="prefetch" href="/assets/index.html-732421b6.js" as="script"><link rel="prefetch" href="/assets/index.html-fca6b6c0.js" as="script"><link rel="prefetch" href="/assets/index.html-6d7e4e77.js" as="script"><link rel="prefetch" href="/assets/index.html-3cf747f7.js" as="script"><link rel="prefetch" href="/assets/index.html-3cf24e06.js" as="script"><link rel="prefetch" href="/assets/index.html-a201dd1d.js" as="script"><link rel="prefetch" href="/assets/index.html-3729ff29.js" as="script"><link rel="prefetch" href="/assets/index.html-9034f3ed.js" as="script"><link rel="prefetch" href="/assets/index.html-15f20c27.js" as="script"><link rel="prefetch" href="/assets/index.html-2404125e.js" as="script"><link rel="prefetch" href="/assets/index.html-0df4fc90.js" as="script"><link rel="prefetch" href="/assets/index.html-11162eb7.js" as="script"><link rel="prefetch" href="/assets/index.html-c114e15a.js" as="script"><link rel="prefetch" href="/assets/index.html-a58deae1.js" as="script"><link rel="prefetch" href="/assets/index.html-37765c53.js" as="script"><link rel="prefetch" href="/assets/index.html-3ed8a6cb.js" as="script"><link rel="prefetch" href="/assets/index.html-f1b2b9d4.js" as="script"><link rel="prefetch" href="/assets/index.html-10612d89.js" as="script"><link rel="prefetch" href="/assets/plyr.min-6e285734.js" as="script"><link rel="prefetch" href="/assets/plyr.min-6e285734.js" as="script"><link rel="prefetch" href="/assets/auto-70906049.js" as="script"><link rel="prefetch" href="/assets/index-b43bc1d0.js" as="script"><link rel="prefetch" href="/assets/flowchart-0c1bb1f6.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-e319be34.js" as="script"><link rel="prefetch" href="/assets/mermaid-mindmap.esm.min-5f6b951c.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-11823b58.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-a54d3639.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo light" src="/logo/logo.gif" alt="ç¹åä¸­è‡ªå¾‹ï¼Œè½é­„ä¸­è‡ªæ„ˆ"><img class="logo dark" src="/logo/logo.gif" alt="ç¹åä¸­è‡ªå¾‹ï¼Œè½é­„ä¸­è‡ªæ„ˆ"><span class="site-name hide-in-pad">ç¹åä¸­è‡ªå¾‹ï¼Œè½é­„ä¸­è‡ªæ„ˆ</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><!---->é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/FrontEnd/Standard/HTML/" class="nav-link" aria-label="å‰ç«¯çŸ¥è¯†åº“"><!---->å‰ç«¯çŸ¥è¯†åº“<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Java/Stream/" class="nav-link" aria-label="åç«¯çŸ¥è¯†åº“"><span class="font-icon icon iconfont icon-iconfont icon-java" style=""></span>åç«¯çŸ¥è¯†åº“<!----></a></div><div class="nav-item hide-in-mobile"><a href="/DesignPattern/Info/" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼"><span class="font-icon icon iconfont icon-iconfont icon-note" style=""></span>è®¾è®¡æ¨¡å¼<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Algorithm/Dichotomy/" class="nav-link" aria-label="å¸¸ç”¨ç®—æ³•"><span class="font-icon icon iconfont icon-iconfont icon-function" style=""></span>å¸¸ç”¨ç®—æ³•<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Interview/JavaScript/Closure/" class="nav-link" aria-label="è‡ªä¿¡é¢è¯•"><span class="font-icon icon iconfont icon-iconfont icon-mian-shi-ti" style=""></span>è‡ªä¿¡é¢è¯•<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Git/" class="nav-link" aria-label="Git"><span class="font-icon icon iconfont icon-iconfont icon-git" style=""></span>Git<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Nginx/Function/" class="nav-link active" aria-label="Nginx"><span class="font-icon icon iconfont icon-iconfont icon-nginx" style=""></span>Nginx<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Server/" class="nav-link" aria-label="æœåŠ¡å™¨"><span class="font-icon icon iconfont icon-iconfont icon-linux" style=""></span>æœåŠ¡å™¨<!----></a></div><div class="nav-item hide-in-mobile"><a href="/Recommend/CSS/" class="nav-link" aria-label="æ¨è"><span class="font-icon icon iconfont icon-iconfont icon-hot" style=""></span>æ¨è<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><a href="/Nginx/Function/" class="title">nginxçš„åŠŸèƒ½</a><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/Nginx/CommonVariables/" class="nav-link sidebar-link sidebar-page" aria-label="nginxå¸¸ç”¨å˜é‡"><!---->nginxå¸¸ç”¨å˜é‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/Nginx/Core/" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="nginxå†…æ ¸æ¨¡å—"><!---->nginxå†…æ ¸æ¨¡å—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#ç”¨äºè°ƒè¯•è¿›ç¨‹-å®šä½é—®é¢˜çš„é…ç½®é¡¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç”¨äºè°ƒè¯•è¿›ç¨‹ï¼Œå®šä½é—®é¢˜çš„é…ç½®é¡¹"><!---->ç”¨äºè°ƒè¯•è¿›ç¨‹ï¼Œå®šä½é—®é¢˜çš„é…ç½®é¡¹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#daemon" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="daemon"><!---->daemon<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#master-process" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="master_process"><!---->master_process<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#error-log" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="error_log"><!---->error_log<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#debug-points" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="debug_points"><!---->debug_points<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#debug-connection" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="debug_connection"><!---->debug_connection<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#worker-rlimit-core" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="worker_rlimit_core"><!---->worker_rlimit_core<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#working-directory" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="working_directory"><!---->working_directory<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®"><!---->æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#env" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="env"><!---->env<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#include" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="include"><!---->include<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#pid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="pid"><!---->pid<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#user" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="user"><!---->user<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#worker-rlimit-nofile" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="worker_rlimit_nofile"><!---->worker_rlimit_nofile<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#worker-rlimit-sigpending" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="worker_rlimit_sigpending"><!---->worker_rlimit_sigpending<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®"><!---->ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#worker-processes" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="worker_processes"><!---->worker_processes<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#worker-cpu-affinity" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="worker_cpu_affinity"><!---->worker_cpu_affinity<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#ssl-engine" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ssl_engine"><!---->ssl_engine<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#timer-resolution" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="timer_resolution"><!---->timer_resolution<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#worker-priority" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="worker_priority"><!---->worker_priority<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#äº‹ä»¶ç±»é…ç½®é¡¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº‹ä»¶ç±»é…ç½®é¡¹"><!---->äº‹ä»¶ç±»é…ç½®é¡¹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#worker-connections" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="worker_connections"><!---->worker_connections<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#accept-mutex" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="accept_mutex"><!---->accept_mutex<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#lock-file" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="lock_file"><!---->lock_file<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#accept-mutex-delay" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="accept_mutex_delay"><!---->accept_mutex_delay<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#multi-accept" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="multi_accept"><!---->multi_accept<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/Nginx/Core/#use" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="use"><!---->use<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-nginx" style=""></span>nginxå†…æ ¸æ¨¡å—</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://jin-shaohui.gitee.io" target="_blank" rel="noopener noreferrer">JSH</a></span><span property="author" content="JSH"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-06-20T10:04:14.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 12 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT12M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category1 clickable" role="navigation">nginx</span><meta property="articleSection" content="nginx"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag1 clickable" role="navigation">nginx</span><meta property="keywords" content="nginx"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#ç”¨äºè°ƒè¯•è¿›ç¨‹-å®šä½é—®é¢˜çš„é…ç½®é¡¹" class="router-link-active router-link-exact-active toc-link level3">ç”¨äºè°ƒè¯•è¿›ç¨‹ï¼Œå®šä½é—®é¢˜çš„é…ç½®é¡¹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#daemon" class="router-link-active router-link-exact-active toc-link level4">daemon</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#master-process" class="router-link-active router-link-exact-active toc-link level4">master_process</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#error-log" class="router-link-active router-link-exact-active toc-link level4">error_log</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#debug-points" class="router-link-active router-link-exact-active toc-link level4">debug_points</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#debug-connection" class="router-link-active router-link-exact-active toc-link level4">debug_connection</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#worker-rlimit-core" class="router-link-active router-link-exact-active toc-link level4">worker_rlimit_core</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#working-directory" class="router-link-active router-link-exact-active toc-link level4">working_directory</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®" class="router-link-active router-link-exact-active toc-link level3">æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#env" class="router-link-active router-link-exact-active toc-link level4">env</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#include" class="router-link-active router-link-exact-active toc-link level4">include</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#pid" class="router-link-active router-link-exact-active toc-link level4">pid</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#user" class="router-link-active router-link-exact-active toc-link level4">user</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#worker-rlimit-nofile" class="router-link-active router-link-exact-active toc-link level4">worker_rlimit_nofile</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#worker-rlimit-sigpending" class="router-link-active router-link-exact-active toc-link level4">worker_rlimit_sigpending</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®" class="router-link-active router-link-exact-active toc-link level3">ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#worker-processes" class="router-link-active router-link-exact-active toc-link level4">worker_processes</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#worker-cpu-affinity" class="router-link-active router-link-exact-active toc-link level4">worker_cpu_affinity</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#ssl-engine" class="router-link-active router-link-exact-active toc-link level4">ssl_engine</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#timer-resolution" class="router-link-active router-link-exact-active toc-link level4">timer_resolution</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#worker-priority" class="router-link-active router-link-exact-active toc-link level4">worker_priority</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#äº‹ä»¶ç±»é…ç½®é¡¹" class="router-link-active router-link-exact-active toc-link level3">äº‹ä»¶ç±»é…ç½®é¡¹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#worker-connections" class="router-link-active router-link-exact-active toc-link level4">worker_connections</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#accept-mutex" class="router-link-active router-link-exact-active toc-link level4">accept_mutex</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#lock-file" class="router-link-active router-link-exact-active toc-link level4">lock_file</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#accept-mutex-delay" class="router-link-active router-link-exact-active toc-link level4">accept_mutex_delay</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#multi-accept" class="router-link-active router-link-exact-active toc-link level4">multi_accept</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Nginx/Core/#use" class="router-link-active router-link-exact-active toc-link level4">use</a></li><!----><!--]--></ul><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><p>å†…æ ¸æ¨¡å—ç”¨äºæ§åˆ¶ <strong>nginxæœåŠ¡å™¨</strong> çš„åŸºæœ¬åŠŸèƒ½ï¼Œå†…æ ¸å‚æ•°çš„ä¿®æ”¹éœ€è¦é‡æ–°å¯åŠ¨nginxæ‰èƒ½ç”Ÿæ•ˆï¼Ÿï¼Ÿï¼Ÿ</p><h3 id="ç”¨äºè°ƒè¯•è¿›ç¨‹-å®šä½é—®é¢˜çš„é…ç½®é¡¹" tabindex="-1"><a class="header-anchor" href="#ç”¨äºè°ƒè¯•è¿›ç¨‹-å®šä½é—®é¢˜çš„é…ç½®é¡¹" aria-hidden="true">#</a> ç”¨äºè°ƒè¯•è¿›ç¨‹ï¼Œå®šä½é—®é¢˜çš„é…ç½®é¡¹</h3><h4 id="daemon" tabindex="-1"><a class="header-anchor" href="#daemon" aria-hidden="true">#</a> daemon</h4><div class="hint-container info"><p class="hint-container-title">æ˜¯å¦ä»¥ å®ˆæŠ¤è¿›ç¨‹ æ–¹å¼å¯åŠ¨nginx</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š daemon on|off;
é»˜è®¤ï¼š daemon on;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰</strong> æ˜¯ <strong>è„±ç¦»ç»ˆç«¯</strong> å¹¶ä¸”åœ¨ <strong>åå°è¿è¡Œ</strong> çš„è¿›ç¨‹ã€‚ å®ƒè„±ç¦»ç»ˆç«¯æ˜¯ä¸ºäº†é¿å…è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¿¡æ¯åœ¨ä»»ä½•ç»ˆç«¯ä¸Šæ˜¾ç¤ºï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¿›ç¨‹ä¹Ÿä¸ä¼šè¢«ä»»ä½•ç»ˆç«¯æ‰€äº§ç”Ÿçš„ä¿¡æ¯æ‰€æ‰“æ–­ã€‚ <code>nginxæ¯«æ— ç–‘é—®æ˜¯ä¸€ä¸ªéœ€è¦ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œçš„æœåŠ¡</code>ï¼Œå› æ­¤ï¼Œ<strong>é»˜è®¤</strong> éƒ½æ˜¯ä»¥è¿™ç§æ–¹å¼è¿è¡Œçš„ã€‚ ä¸è¿‡ nginx è¿˜æ˜¯æä¾›äº† <strong>å…³é—­</strong> å®ˆæŠ¤è¿›ç¨‹çš„æ¨¡å¼ï¼Œä¹‹æ‰€ä»¥æä¾›è¿™ç§æ¨¡å¼ï¼Œæ˜¯ä¸ºäº† <strong>æ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•nginx</strong>ï¼Œæ¯•ç«Ÿç”¨ <strong>gdb</strong><sup>Linuxå¸¸ç”¨çš„ç¨‹åºè°ƒè¯•å™¨</sup> è°ƒè¯•è¿›ç¨‹æ—¶æœ€çƒ¦ççš„å°±æ˜¯<code>å¦‚ä½•ç»§ç»­è·Ÿè¿›forkå‡ºçš„å­è¿›ç¨‹</code>äº†ã€‚</p></div><h4 id="master-process" tabindex="-1"><a class="header-anchor" href="#master-process" aria-hidden="true">#</a> master_process</h4><div class="hint-container info"><p class="hint-container-title">æ˜¯å¦ä»¥ master/worker æ–¹å¼å·¥ä½œ</p><ul><li>onæ—¶ï¼ˆé»˜è®¤ï¼‰ï¼Œä»¥ <strong>master/worker</strong> è¿›ç¨‹è¿è¡Œ</li><li>offæ—¶ï¼Œä»¥ <strong>master</strong> è¿›ç¨‹è¿è¡Œ</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼šmaster_process on|off;
é»˜è®¤ï¼šmaster_process on;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤ nginx æ˜¯ä»¥ <strong>ä¸€ä¸ªmasterè¿›ç¨‹</strong> ç®¡ç† <strong>å¤šä¸ª workerè¿›ç¨‹</strong> çš„æ–¹å¼è¿è¡Œçš„ï¼Œå‡ ä¹æ‰€æœ‰çš„äº§å“ç¯å¢ƒä¸‹ï¼Œnginxéƒ½ä»¥è¿™ç§æ–¹å¼å·¥ä½œã€‚</p><p>ä¸daemoné…ç½®ç›¸åŒï¼Œæä¾› <strong>master_process</strong> é…ç½®ä¹Ÿæ˜¯ä¸ºäº† <strong>æ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•nginx</strong>ã€‚å¦‚æœç”¨ <strong>å…³é—­</strong> äº† <strong>master_process</strong> æ–¹å¼ï¼Œå°±ä¸ä¼š fork å‡º workerå­è¿›ç¨‹ æ¥å¤„ç†è¯·æ±‚ï¼Œè€Œæ˜¯ç”¨ <strong>masterè¿›ç¨‹</strong> è‡ªèº«æ¥å¤„ç†è¯·æ±‚ã€‚</p></div><h4 id="error-log" tabindex="-1"><a class="header-anchor" href="#error-log" aria-hidden="true">#</a> error_log</h4><div class="hint-container info"><p class="hint-container-title">æ—¥å¿—æ–‡ä»¶é…ç½®</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š error_log /path/to/file level;
é»˜è®¤ï¼š error_log logs/error.log error;
å…³é—­ï¼š error_log /dev/null;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>path/to/file</strong> å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå…·ä½“çš„æ–‡ä»¶</p><ul><li>é»˜è®¤æƒ…å†µä¸‹æ˜¯ <strong>logs/error.log</strong> æ–‡ä»¶ï¼Œæœ€å¥½å°†å®ƒæ”¾åˆ°ä¸€ä¸ªç£ç›˜ç©ºé—´è¶³å¤Ÿå¤§çš„ä½ç½®</li><li>å¯ä»¥æ˜¯ <strong>/dev/null</strong>ï¼Œè¿™æ ·å°±ä¸ä¼šè¾“å‡ºä»»ä½•æ—¥å¿—äº†ï¼Œè¿™ä¹Ÿæ˜¯å…³é—­ <strong>erroræ—¥å¿—</strong> çš„ <strong>å”¯ä¸€æ‰‹æ®µ</strong></li><li>å¯ä»¥æ˜¯ <strong>stderr</strong>ï¼Œè¿™æ ·æ—¥å¿—ä¼šè¾“å‡ºåˆ° <strong>æ ‡å‡†é”™è¯¯æ–‡ä»¶</strong></li></ul><p><strong>level</strong> æ˜¯æ—¥å¿—çš„è¾“å‡ºçº§åˆ«</p><ul><li>å–å€¼èŒƒå›´æ˜¯ <code>debug</code>ã€<code>info</code>ã€<code>notice</code>ã€<code>warn</code>ã€<code>error</code>ã€<code>crit</code>ã€<code>alert</code>ã€<code>emerg</code>ï¼Œä»å·¦è‡³å³çº§åˆ«ä¾æ¬¡å¢å¤§</li><li>å¦‚æœæ—¥å¿—çº§åˆ«è®¾å®šåˆ° <strong>debug</strong>ï¼Œå¿…é¡»åœ¨ configure æ—¶åŠ å…¥ <strong>-â€“with-debug</strong> é…ç½®é¡¹</li></ul></div><h4 id="debug-points" tabindex="-1"><a class="header-anchor" href="#debug-points" aria-hidden="true">#</a> debug_points</h4><div class="hint-container info"><p class="hint-container-title">æ˜¯å¦å¤„ç†å‡ ä¸ªç‰¹æ®Šçš„è°ƒè¯•ç‚¹</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š debug_points [stop|abort]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¯¥æŒ‡ä»¤ç”¨äº nginx è°ƒè¯•ï¼Œå¯ç”¨æ¥å¸®åŠ©ç”¨æˆ·è°ƒè¯•nginxã€‚<strong>debug_points</strong> æ¥æ”¶2ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºï¼š<strong>stop</strong> å’Œ <strong>abort</strong>ã€‚</p><p>nginx åœ¨ä¸€äº›å…³é”®çš„é”™è¯¯é€»è¾‘ä¸­ï¼ˆnginx 1.0.14ç‰ˆæœ¬ä¸­æœ‰8å¤„ï¼‰è®¾ç½®äº†è°ƒè¯•ç‚¹ã€‚å¦‚æœè®¾ç½®ä¸º <strong>stop</strong>ï¼Œé‚£ä¹ˆ nginx çš„ä»£ç æ‰§è¡Œåˆ°è¿™äº›è°ƒè¯•ç‚¹æ—¶ï¼Œä¼šå‘å‡º <strong>SIGSTOP</strong> ä¿¡å·ã€‚å¦‚æœè®¾ç½®ä¸º <strong>abort</strong>ï¼Œåˆ™ä¼šäº§ç”Ÿä¸€ä¸ª <strong>coredump</strong> æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨gdbæ¥æŸ¥çœ‹nginxå½“æ—¶çš„å„ç§ä¿¡æ¯ã€‚</p></div><h4 id="debug-connection" tabindex="-1"><a class="header-anchor" href="#debug-connection" aria-hidden="true">#</a> debug_connection</h4><div class="hint-container info"><p class="hint-container-title">ä»…å¯¹æŒ‡å®šçš„å®¢æˆ·ç«¯è¾“å‡ºdebugçº§åˆ«çš„æ—¥å¿—</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š debug_connection [IP|CIDR]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªé…ç½®é¡¹å®é™…ä¸Šå±äº <strong>äº‹ä»¶ç±»</strong> é…ç½®ï¼Œå› æ­¤ï¼Œå®ƒå¿…é¡»æ”¾åœ¨ <strong>events{...}</strong> ä¸­æ‰æœ‰æ•ˆã€‚å®ƒçš„å€¼å¯ä»¥æ˜¯ <strong>IPåœ°å€</strong> æˆ– <strong>CIDRåœ°å€</strong> ï¼Œä¾‹å¦‚ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>events {
  debug_connection 10.224.66.14;
  debug_connection 10.224.57.0/24;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œä»…ä»…æ¥è‡ªä»¥ä¸Š <strong>IPåœ°å€</strong> çš„è¯·æ±‚æ‰ä¼šè¾“å‡º <strong>debugçº§åˆ«</strong> çš„æ—¥å¿—ï¼Œå…¶ä»–è¯·æ±‚ä»ç„¶æ²¿ç”¨ <strong>error_log</strong> ä¸­é…ç½®çš„æ—¥å¿—çº§åˆ«ã€‚<code>ä¸Šé¢è¿™ä¸ªé…ç½®å¯¹ä¿®å¤Bugå¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å®šä½é«˜å¹¶å‘è¯·æ±‚ä¸‹æ‰ä¼šå‘ç”Ÿçš„é—®é¢˜ã€‚</code></p><p>ä½¿ç”¨ <strong>debug_connection</strong> å‰ï¼Œéœ€ç¡®ä¿åœ¨æ‰§è¡Œ <strong>configure</strong> æ—¶å·²ç»åŠ å…¥äº† <strong>--with-debug</strong> å‚æ•°ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆã€‚</p></div><h4 id="worker-rlimit-core" tabindex="-1"><a class="header-anchor" href="#worker-rlimit-core" aria-hidden="true">#</a> worker_rlimit_core</h4><div class="hint-container info"><p class="hint-container-title">é™åˆ¶ coredump æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶çš„å¤§å°</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š worker_rlimit_core size
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå½“è¿›ç¨‹ <strong>å‘ç”Ÿé”™è¯¯</strong> æˆ– <strong>æ”¶åˆ°ä¿¡å·</strong> è€Œç»ˆæ­¢æ—¶ï¼Œç³»ç»Ÿä¼šå°†è¿›ç¨‹æ‰§è¡Œæ—¶çš„å†…å­˜å†…å®¹ï¼ˆ<strong>æ ¸å¿ƒæ˜ åƒ</strong>ï¼‰å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼ˆ<strong>coreæ–‡ä»¶</strong>ï¼‰ï¼Œä»¥ä½œä¸ºè°ƒè¯•ä¹‹ç”¨ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ <strong>æ ¸å¿ƒè½¬å‚¨ï¼ˆcore dumpsï¼‰</strong>ã€‚</p><p>å½“Nginxè¿›ç¨‹å‡ºç°ä¸€äº› <strong>éæ³•æ“ä½œï¼ˆå¦‚å†…å­˜è¶Šç•Œï¼‰</strong> å¯¼è‡´è¿›ç¨‹ç›´æ¥è¢«æ“ä½œç³»ç»Ÿå¼ºåˆ¶ç»“æŸæ—¶ï¼Œä¼š <strong>ç”Ÿæˆæ ¸å¿ƒè½¬å‚¨coreæ–‡ä»¶</strong>ï¼Œå¯ä»¥ä» core æ–‡ä»¶è·å–å½“æ—¶çš„å †æ ˆã€å¯„å­˜å™¨ç­‰ä¿¡æ¯ï¼Œä»è€Œå¸®åŠ©æˆ‘ä»¬å®šä½é—®é¢˜ã€‚</p><p>ä½†è¿™ç§coreæ–‡ä»¶ä¸­çš„è®¸å¤šä¿¡æ¯ <strong>ä¸ä¸€å®šæ˜¯ç”¨æˆ·éœ€è¦çš„</strong>ï¼Œå¦‚æœä¸åŠ ä»¥é™åˆ¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¸€ä¸ªcoreæ–‡ä»¶ä¼šè¾¾åˆ°å‡ GBï¼Œè¿™æ ·éšä¾¿ <strong>coredumps</strong> å‡ æ¬¡å°±ä¼šæŠŠç£ç›˜å æ»¡ï¼Œå¼•å‘ä¸¥é‡é—®é¢˜ã€‚</p><p>é€šè¿‡ <strong>worker_rlimit_core</strong> é…ç½®å¯ä»¥é™åˆ¶ <strong>coreæ–‡ä»¶</strong> çš„å¤§å°ï¼Œä»è€Œæœ‰æ•ˆå¸®åŠ©ç”¨æˆ·å®šä½é—®é¢˜ã€‚</p></div><h4 id="working-directory" tabindex="-1"><a class="header-anchor" href="#working-directory" aria-hidden="true">#</a> working_directory</h4><div class="hint-container info"><p class="hint-container-title">æŒ‡å®š coredump æ–‡ä»¶ç”Ÿæˆç›®å½•</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š working_directory path
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>workerè¿›ç¨‹çš„å·¥ä½œç›®å½•ã€‚è¿™ä¸ªé…ç½®é¡¹çš„å”¯ä¸€ç”¨é€”å°±æ˜¯è®¾ç½® <strong>coredump</strong> æ–‡ä»¶æ‰€æ”¾ç½®çš„ç›®å½•ã€‚å› æ­¤ï¼Œéœ€ç¡®ä¿ workerè¿›ç¨‹ <strong>æœ‰æƒé™</strong> å‘ <strong>working_directory</strong> æŒ‡å®šçš„ç›®å½•ä¸­å†™å…¥æ–‡ä»¶ã€‚</p></div><h3 id="æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®" aria-hidden="true">#</a> æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®</h3><h4 id="env" tabindex="-1"><a class="header-anchor" href="#env" aria-hidden="true">#</a> env</h4><div class="hint-container info"><p class="hint-container-title">å®šä¹‰ç¯å¢ƒå˜é‡</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š env VAR|VAR=VALUE
äº‹ä¾‹ï¼šenv TESTPATH=/tmp/;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªé…ç½®é¡¹å¯ä»¥è®©ç”¨æˆ·ç›´æ¥è®¾ç½® <strong>æ“ä½œç³»ç»Ÿ</strong> ä¸Šçš„ <strong>ç¯å¢ƒå˜é‡</strong></p></div><h4 id="include" tabindex="-1"><a class="header-anchor" href="#include" aria-hidden="true">#</a> include</h4><div class="hint-container info"><p class="hint-container-title">åµŒå…¥å…¶ä»–é…ç½®æ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š include /path/to/file;
äº‹ä¾‹ï¼š include mime.types;
äº‹ä¾‹ï¼š include vhost/*.conf;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>include é…ç½®é¡¹ å¯ä»¥å°† <strong>å…¶ä»–é…ç½®æ–‡ä»¶</strong> åµŒå…¥åˆ°å½“å‰çš„ <strong>nginx.conf</strong> æ–‡ä»¶ä¸­ï¼Œ å®ƒçš„å‚æ•° æ—¢å¯ä»¥æ˜¯ <strong>ç»å¯¹è·¯å¾„</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯ <strong>ç›¸å¯¹è·¯å¾„</strong>ï¼ˆç›¸å¯¹äºNginxçš„é…ç½®ç›®å½•ï¼Œå³nginx.confæ‰€åœ¨çš„ç›®å½•ï¼‰ã€‚ å‚æ•°çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ª <strong>æ˜ç¡®çš„æ–‡ä»¶å</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯å«æœ‰ <strong>é€šé…ç¬¦*çš„æ–‡ä»¶å</strong>ï¼ŒåŒæ—¶å¯ä»¥ä¸€æ¬¡åµŒå…¥å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚</p></div><h4 id="pid" tabindex="-1"><a class="header-anchor" href="#pid" aria-hidden="true">#</a> pid</h4><div class="hint-container info"><p class="hint-container-title">æŒ‡å®šnginxçš„pidæ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š pid /path/to/pid_file
é»˜è®¤ï¼š pid logs/nginx.pid;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿å­˜ <strong>masterè¿›ç¨‹ID</strong> çš„ pidæ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚</p><p>é»˜è®¤ä¸ <strong>configure</strong> æ‰§è¡Œæ—¶çš„å‚æ•° <strong>â€“pid-path</strong> æ‰€æŒ‡å®šçš„è·¯å¾„æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå¯ä»¥éšæ—¶ä¿®æ”¹ï¼Œä½†åº”ç¡®ä¿ nginx <strong>æœ‰æƒé™</strong>åœ¨ç›¸åº”çš„ç›®æ ‡ä¸­<strong>åˆ›å»ºpidæ–‡ä»¶</strong>ï¼Œè¯¥æ–‡ä»¶ç›´æ¥å½±å“ nginx æ˜¯å¦å¯ä»¥è¿è¡Œã€‚</p></div><h4 id="user" tabindex="-1"><a class="header-anchor" href="#user" aria-hidden="true">#</a> user</h4><div class="hint-container info"><p class="hint-container-title">æŒ‡å®šè¿è¡Œ workerè¿›ç¨‹ çš„ç”¨æˆ·å’Œç»„</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š user username [groupname];
é»˜è®¤ï¼š user nobody nobody;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>userç”¨äºè®¾ç½® <strong>masterè¿›ç¨‹</strong> å¯åŠ¨åï¼Œforkå‡ºçš„ <strong>workerè¿›ç¨‹</strong> è¿è¡Œåœ¨å“ªä¸ªç”¨æˆ·å’Œç”¨æˆ·ç»„ä¸‹ã€‚å½“æŒ‰ç…§ <strong><code>user username;</code></strong> è®¾ç½®æ—¶ï¼Œ<strong>ç”¨æˆ·ç»„å</strong> ä¸ <strong>ç”¨æˆ·å</strong> ç›¸åŒã€‚</p><p>è‹¥ç”¨æˆ·åœ¨ configure å‘½ä»¤æ‰§è¡Œæ—¶ä½¿ç”¨äº†å‚æ•° <strong><code>â€“user=username</code></strong> å’Œ <strong><code>â€“group=groupname</code></strong> ï¼Œæ­¤æ—¶ nginx.conf å°†ä½¿ç”¨å‚æ•°ä¸­æŒ‡å®šçš„ <strong>ç”¨æˆ·</strong> å’Œ <strong>ç”¨æˆ·ç»„</strong>ã€‚</p></div><h4 id="worker-rlimit-nofile" tabindex="-1"><a class="header-anchor" href="#worker-rlimit-nofile" aria-hidden="true">#</a> worker_rlimit_nofile</h4><div class="hint-container info"><p class="hint-container-title">æŒ‡å®š nginx workerè¿›ç¨‹ å¯ä»¥æ‰“å¼€çš„æœ€å¤§å¥æŸ„æè¿°ç¬¦ä¸ªæ•°</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š worker_rlimit_nofile limit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h4 id="worker-rlimit-sigpending" tabindex="-1"><a class="header-anchor" href="#worker-rlimit-sigpending" aria-hidden="true">#</a> worker_rlimit_sigpending</h4><div class="hint-container info"><p class="hint-container-title">æŒ‡å®šæ¯ä¸ªç”¨æˆ·èƒ½å¤Ÿå‘å¾€workerçš„ä¿¡å·çš„æ•°é‡</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š worker_rlimit_sigpending limit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è®¾ç½®æ¯ä¸ªç”¨æˆ·å‘å¾€ nginx çš„ <strong>ä¿¡å·é˜Ÿåˆ—çš„å¤§å°</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æŸä¸ªç”¨æˆ·çš„ä¿¡å·é˜Ÿåˆ—æ»¡äº†ï¼Œè¿™ä¸ªç”¨æˆ·å†å‘é€çš„ä¿¡å·é‡ä¼šè¢« <strong>ä¸¢æ‰</strong></p></div><h3 id="ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®" aria-hidden="true">#</a> ä¼˜åŒ–æ€§èƒ½ç›¸å…³çš„é…ç½®</h3><h4 id="worker-processes" tabindex="-1"><a class="header-anchor" href="#worker-processes" aria-hidden="true">#</a> worker_processes</h4><div class="hint-container info"><p class="hint-container-title">workerçº¿ç¨‹çš„ä¸ªæ•°</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š worker_processes number;
é»˜è®¤ï¼š worker_processes 1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ master/worker è¿è¡Œæ–¹å¼ä¸‹ï¼Œå³ <strong><code>master_process on;</code></strong> ï¼Œå®šä¹‰ <strong>workerè¿›ç¨‹</strong> çš„ä¸ªæ•°ã€‚</p><p>é€šå¸¸åº”è¯¥ä¸ºç‰©ç†CPUæ ¸å¿ƒä¸ªæ•°å‡1ï¼›</p><p>workerè¿›ç¨‹çš„æ•°é‡ä¼šç›´æ¥å½±å“æ€§èƒ½ã€‚</p><p>æ¯ä¸ª workerè¿›ç¨‹ éƒ½æ˜¯ <strong>å•çº¿ç¨‹çš„è¿›ç¨‹</strong>ï¼Œå®ƒä»¬ä¼šè°ƒç”¨å„ä¸ªæ¨¡å—ä»¥å®ç°å¤šç§å¤šæ ·çš„åŠŸèƒ½ã€‚ å¦‚æœè¿™äº›æ¨¡å—ç¡®è®¤ä¸ä¼šå‡ºç°é˜»å¡å¼çš„è°ƒç”¨ï¼Œé‚£ä¹ˆï¼Œæœ‰å¤šå°‘CPUå†…æ ¸å°±åº”è¯¥é…ç½®å¤šå°‘ä¸ªè¿›ç¨‹ï¼›åä¹‹ï¼Œå¦‚æœæœ‰å¯èƒ½å‡ºç°é˜»å¡å¼è°ƒç”¨ï¼Œé‚£ä¹ˆéœ€è¦é…ç½®ç¨å¤šä¸€äº›çš„workerè¿›ç¨‹ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä¸šåŠ¡æ–¹é¢ä¼šè‡´ä½¿ç”¨æˆ·è¯·æ±‚å¤§é‡è¯»å–æœ¬åœ°ç£ç›˜ä¸Šçš„é™æ€èµ„æºæ–‡ä»¶ï¼Œè€Œä¸”æœåŠ¡å™¨ä¸Šçš„å†…å­˜è¾ƒå°ï¼Œä»¥è‡³äºå¤§éƒ¨åˆ†çš„è¯·æ±‚è®¿é—®é™æ€èµ„æºæ–‡ä»¶æ—¶éƒ½å¿…é¡»è¯»å–ç£ç›˜ï¼ˆç£å¤´çš„å¯»å€æ˜¯ç¼“æ…¢çš„ï¼‰ï¼Œè€Œä¸æ˜¯å†…å­˜ä¸­çš„ç£ç›˜ç¼“å­˜ï¼Œé‚£ä¹ˆç£ç›˜I/Oè°ƒç”¨å¯èƒ½ä¼šé˜»å¡ä½workerè¿›ç¨‹å°‘é‡æ—¶é—´ï¼Œè¿›è€Œå¯¼è‡´æœåŠ¡æ•´ä½“æ€§èƒ½ä¸‹é™ã€‚</p><p>å¤šworkerè¿›ç¨‹å¯ä»¥å……åˆ†åˆ©ç”¨å¤šæ ¸ç³»ç»Ÿæ¶æ„ï¼Œä½†è‹¥workerè¿›ç¨‹çš„æ•°é‡å¤šäºCPUå†…æ ¸æ•°ï¼Œé‚£ä¹ˆä¼šå¢å¤§è¿›ç¨‹é—´åˆ‡æ¢å¸¦æ¥çš„æ¶ˆè€—ï¼ˆLinuxæ˜¯æŠ¢å å¼å†…æ ¸ï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨æˆ·è¦é…ç½®ä¸CPUå†…æ ¸æ•°ç›¸ç­‰çš„workerè¿›ç¨‹ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸‹é¢çš„worker_cpu_affinityé…ç½®æ¥ç»‘å®šCPUå†…æ ¸ã€‚</p></div><h4 id="worker-cpu-affinity" tabindex="-1"><a class="header-anchor" href="#worker-cpu-affinity" aria-hidden="true">#</a> worker_cpu_affinity</h4><div class="hint-container info"><p class="hint-container-title">ç»‘å®šNginx workerè¿›ç¨‹åˆ°æŒ‡å®šçš„CPUå†…æ ¸</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š worker_cpu_affinity cpumask[cpumaskâ€¦]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸ºä»€ä¹ˆè¦ç»‘å®šworkerè¿›ç¨‹åˆ°æŒ‡å®šçš„CPUå†…æ ¸å‘¢ï¼Ÿå‡å®šæ¯ä¸€ä¸ªworkerè¿›ç¨‹éƒ½æ˜¯éå¸¸ç¹å¿™çš„ï¼Œå¦‚æœå¤šä¸ªworkerè¿›ç¨‹éƒ½åœ¨æŠ¢åŒä¸€ä¸ªCPUï¼Œé‚£ä¹ˆè¿™å°±ä¼šå‡ºç°åŒæ­¥é—®é¢˜ã€‚åä¹‹ï¼Œå¦‚æœæ¯ä¸€ä¸ªworkerè¿›ç¨‹éƒ½ç‹¬äº«ä¸€ä¸ªCPUï¼Œå°±åœ¨å†…æ ¸çš„è°ƒåº¦ç­–ç•¥ä¸Šå®ç°äº†å®Œå…¨çš„å¹¶å‘ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæœ‰4é¢—CPUå†…æ ¸ï¼Œå°±å¯ä»¥è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>worker_processes 4;
worker_cpu_affinity 1000 0100 0010 0001;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ç¬¬1ä¸ªè¿›ç¨‹ç»‘å®šåˆ°CPU0/CPU2ä¸Š,å°†ç¬¬2ä¸ªè¿›ç¨‹ç»‘å®šåˆ°CPU1/CPU3ä¸Š,è¿™ä¸ªå¯¹äºè¶…çº¿ç¨‹CPUåˆé€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>worker_processes 1
worker_cpu_affinity 0101 1010;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šworker_cpu_affinityé…ç½®ä»…å¯¹Linuxæ“ä½œç³»ç»Ÿæœ‰æ•ˆã€‚Linuxæ“ä½œç³»ç»Ÿä½¿ç”¨sched_setaffinity()ç³»ç»Ÿè°ƒç”¨å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p></div><h4 id="ssl-engine" tabindex="-1"><a class="header-anchor" href="#ssl-engine" aria-hidden="true">#</a> ssl_engine</h4><div class="hint-container info"><p class="hint-container-title">SSLç¡¬ä»¶åŠ é€Ÿ</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š ssl_engine device;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœæœåŠ¡å™¨ä¸Šæœ‰SSLç¡¬ä»¶åŠ é€Ÿè®¾å¤‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿›è¡Œé…ç½®ä»¥åŠ å¿«SSLåè®®çš„å¤„ç†é€Ÿåº¦ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨OpenSSLæä¾›çš„å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦æœ‰SSLç¡¬ä»¶åŠ é€Ÿè®¾å¤‡ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>openssl engine -t
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h4 id="timer-resolution" tabindex="-1"><a class="header-anchor" href="#timer-resolution" aria-hidden="true">#</a> timer_resolution</h4><div class="hint-container info"><p class="hint-container-title">ç³»ç»Ÿè°ƒç”¨ gettimeofday çš„æ‰§è¡Œé¢‘ç‡</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š timer_resolution t;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¬¡å†…æ ¸çš„äº‹ä»¶è°ƒç”¨ï¼ˆå¦‚epollã€selectã€pollã€kqueueç­‰ï¼‰è¿”å›æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡gettimeofdayï¼Œå®ç°ç”¨å†…æ ¸çš„æ—¶é’Ÿæ¥æ›´æ–°Nginxä¸­çš„ç¼“å­˜æ—¶é’Ÿã€‚ åœ¨æ—©æœŸçš„Linuxå†…æ ¸ä¸­ï¼Œgettimeofdayçš„æ‰§è¡Œä»£ä»·ä¸å°ï¼Œå› ä¸ºä¸­é—´æœ‰ä¸€æ¬¡å†…æ ¸æ€åˆ°ç”¨æˆ·æ€çš„å†…å­˜å¤åˆ¶ã€‚ å½“éœ€è¦é™ä½gettimeofdayçš„è°ƒç”¨é¢‘ç‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨timer_resolutioné…ç½®ã€‚ä¾‹å¦‚ï¼Œâ€œtimer_resolution 100msï¼›â€è¡¨ç¤ºè‡³å°‘æ¯100msæ‰è°ƒç”¨ä¸€æ¬¡gettimeofdayã€‚</p><p>ä½†åœ¨ç›®å‰çš„å¤§å¤šæ•°å†…æ ¸ä¸­ï¼Œå¦‚x86-64ä½“ç³»æ¶æ„ï¼Œgettimeofdayåªæ˜¯ä¸€æ¬¡vsyscallï¼Œä»…ä»…å¯¹å…±äº«å†…å­˜é¡µä¸­çš„æ•°æ®åšè®¿é—®ï¼Œå¹¶ä¸æ˜¯é€šå¸¸çš„ç³»ç»Ÿè°ƒç”¨ï¼Œä»£ä»·å¹¶ä¸å¤§ï¼Œä¸€èˆ¬ä¸å¿…ä½¿ç”¨è¿™ä¸ªé…ç½®ã€‚ è€Œä¸”ï¼Œå¦‚æœå¸Œæœ›æ—¥å¿—æ–‡ä»¶ä¸­æ¯è¡Œæ‰“å°çš„æ—¶é—´æ›´å‡†ç¡®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒã€‚</p></div><h4 id="worker-priority" tabindex="-1"><a class="header-anchor" href="#worker-priority" aria-hidden="true">#</a> worker_priority</h4><div class="hint-container info"><p class="hint-container-title">Nginx workerè¿›ç¨‹ä¼˜å…ˆçº§è®¾ç½®</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š worker_priority nice;
é»˜è®¤ï¼š worker_priority 0;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥é…ç½®é¡¹ç”¨äºè®¾ç½®Nginx workerè¿›ç¨‹çš„niceä¼˜å…ˆçº§ã€‚</p><p>åœ¨Linuxæˆ–å…¶ä»–ç±»UNIXæ“ä½œç³»ç»Ÿä¸­ï¼Œå½“è®¸å¤šè¿›ç¨‹éƒ½å¤„äºå¯æ‰§è¡ŒçŠ¶æ€æ—¶ï¼Œå°†æŒ‰ç…§æ‰€æœ‰è¿›ç¨‹çš„ä¼˜å…ˆçº§æ¥å†³å®šæœ¬æ¬¡å†…æ ¸é€‰æ‹©å“ªä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œã€‚ è¿›ç¨‹æ‰€åˆ†é…çš„CPUæ—¶é—´ç‰‡å¤§å°ä¹Ÿä¸è¿›ç¨‹ä¼˜å…ˆçº§ç›¸å…³ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¿›ç¨‹åˆ†é…åˆ°çš„æ—¶é—´ç‰‡ä¹Ÿå°±è¶Šå¤§ï¼ˆä¾‹å¦‚ï¼Œåœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œæœ€å°çš„æ—¶é—´ç‰‡åªæœ‰5msï¼Œæœ€å¤§çš„æ—¶é—´ç‰‡åˆ™æœ‰800msï¼‰ã€‚ è¿™æ ·ï¼Œä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹ä¼šå æœ‰æ›´å¤šçš„ç³»ç»Ÿèµ„æºã€‚</p><p>ä¼˜å…ˆçº§ç”±é™æ€ä¼˜å…ˆçº§å’Œå†…æ ¸æ ¹æ®è¿›ç¨‹æ‰§è¡Œæƒ…å†µæ‰€åšçš„åŠ¨æ€è°ƒæ•´ï¼ˆç›®å‰åªæœ‰Â±5çš„è°ƒæ•´ï¼‰å…±åŒå†³å®šã€‚ niceå€¼æ˜¯è¿›ç¨‹çš„é™æ€ä¼˜å…ˆçº§ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯â€“20~+19ï¼Œâ€“20æ˜¯æœ€é«˜ä¼˜å…ˆçº§ï¼Œ+19æ˜¯æœ€ä½ä¼˜å…ˆçº§ã€‚ å› æ­¤ï¼Œå¦‚æœç”¨æˆ·å¸Œæœ›Nginxå æœ‰æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼Œé‚£ä¹ˆå¯ä»¥æŠŠniceå€¼é…ç½®å¾—æ›´å°ä¸€äº›ï¼Œä½†ä¸å»ºè®®æ¯”å†…æ ¸è¿›ç¨‹çš„niceå€¼ï¼ˆé€šå¸¸ä¸ºâ€“5ï¼‰è¿˜è¦å°ã€‚</p></div><h3 id="äº‹ä»¶ç±»é…ç½®é¡¹" tabindex="-1"><a class="header-anchor" href="#äº‹ä»¶ç±»é…ç½®é¡¹" aria-hidden="true">#</a> äº‹ä»¶ç±»é…ç½®é¡¹</h3><h4 id="worker-connections" tabindex="-1"><a class="header-anchor" href="#worker-connections" aria-hidden="true">#</a> worker_connections</h4><div class="hint-container info"><p class="hint-container-title">æ¯ä¸ªworkerçš„æœ€å¤§è¿æ¥æ•°</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š worker_connections number;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®šä¹‰æ¯ä¸ªworkerè¿›ç¨‹å¯ä»¥åŒæ—¶å¤„ç†çš„æœ€å¤§è¿æ¥æ•°ã€‚</p></div><h4 id="accept-mutex" tabindex="-1"><a class="header-anchor" href="#accept-mutex" aria-hidden="true">#</a> accept_mutex</h4><div class="hint-container info"><p class="hint-container-title">æ˜¯å¦æ‰“å¼€accepté”</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š accept_mutex[on|off]
é»˜è®¤ï¼š accept_mutext on;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>accept_mutexæ˜¯Nginxçš„è´Ÿè½½å‡è¡¡é”ï¼Œæœ¬ä¹¦ä¼šåœ¨ç¬¬9ç« äº‹ä»¶å¤„ç†æ¡†æ¶ä¸­è¯¦è¿°Nginxæ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡çš„ã€‚ è¿™é‡Œï¼Œè¯»è€…ä»…éœ€è¦çŸ¥é“accept_mutexè¿™æŠŠé”å¯ä»¥è®©å¤šä¸ªworkerè¿›ç¨‹è½®æµåœ°ã€åºåˆ—åŒ–åœ°ä¸æ–°çš„å®¢æˆ·ç«¯å»ºç«‹TCPè¿æ¥ã€‚ å½“æŸä¸€ä¸ªworkerè¿›ç¨‹å»ºç«‹çš„è¿æ¥æ•°é‡è¾¾åˆ°worker_connectionsé…ç½®çš„æœ€å¤§è¿æ¥æ•°çš„7/8æ—¶ï¼Œä¼šå¤§å¤§åœ°å‡å°è¯¥workerè¿›ç¨‹è¯•å›¾å»ºç«‹æ–°TCPè¿æ¥çš„æœºä¼šï¼Œ ä»¥æ­¤å®ç°æ‰€æœ‰workerè¿›ç¨‹ä¹‹ä¸Šå¤„ç†çš„å®¢æˆ·ç«¯è¯·æ±‚æ•°å°½é‡æ¥è¿‘ã€‚</p><p>accepté”é»˜è®¤æ˜¯æ‰“å¼€çš„ï¼Œå¦‚æœå…³é—­å®ƒï¼Œé‚£ä¹ˆå»ºç«‹TCPè¿æ¥çš„è€—æ—¶ä¼šæ›´çŸ­ï¼Œä½†workerè¿›ç¨‹ä¹‹é—´çš„è´Ÿè½½ä¼šéå¸¸ä¸å‡è¡¡ï¼Œå› æ­¤ä¸å»ºè®®å…³é—­å®ƒã€‚</p></div><h4 id="lock-file" tabindex="-1"><a class="header-anchor" href="#lock-file" aria-hidden="true">#</a> lock_file</h4><div class="hint-container info"><p class="hint-container-title">lockæ–‡ä»¶çš„è·¯å¾„</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š lock_file path/file;
é»˜è®¤ï¼š lock_file logs/nginx.lock;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>accepté”å¯èƒ½éœ€è¦è¿™ä¸ªlockæ–‡ä»¶ï¼Œå¦‚æœaccepté”å…³é—­ï¼Œlock_fileé…ç½®å®Œå…¨ä¸ç”Ÿæ•ˆã€‚ å¦‚æœæ‰“å¼€äº†accepté”ï¼Œå¹¶ä¸”ç”±äºç¼–è¯‘ç¨‹åºã€æ“ä½œç³»ç»Ÿæ¶æ„ç­‰å› ç´ å¯¼è‡´Nginxä¸æ”¯æŒåŸå­é”ï¼Œ è¿™æ—¶æ‰ä¼šç”¨æ–‡ä»¶é”å®ç°accepté”ï¼ˆ14.8.1èŠ‚å°†ä¼šä»‹ç»æ–‡ä»¶é”çš„ç”¨æ³•ï¼‰ï¼Œè¿™æ ·lock_fileæŒ‡å®šçš„lockæ–‡ä»¶æ‰ä¼šç”Ÿæ•ˆã€‚</p><p>æ³¨æ„ ã€€åœ¨åŸºäºi386ã€AMD64ã€Sparc64ã€PPC64ä½“ç³»æ¶æ„çš„æ“ä½œç³»ç»Ÿä¸Šï¼Œè‹¥ä½¿ç”¨GCCã€Intel C++ã€SunPro C++ç¼–è¯‘å™¨æ¥ç¼–è¯‘Nginxï¼Œ åˆ™å¯ä»¥è‚¯å®šè¿™æ—¶çš„Nginxæ˜¯æ”¯æŒåŸå­é”çš„ï¼Œå› ä¸ºNginxä¼šåˆ©ç”¨CPUçš„ç‰¹æ€§å¹¶ç”¨æ±‡ç¼–è¯­è¨€æ¥å®ç°å®ƒï¼ˆå¯ä»¥å‚è€ƒ14.3èŠ‚x86æ¶æ„ä¸‹åŸå­æ“ä½œçš„å®ç°ï¼‰ã€‚ è¿™æ—¶çš„lock_fileé…ç½®æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p></div><h4 id="accept-mutex-delay" tabindex="-1"><a class="header-anchor" href="#accept-mutex-delay" aria-hidden="true">#</a> accept_mutex_delay</h4><div class="hint-container info"><p class="hint-container-title">ä½¿ç”¨accepté”ååˆ°çœŸæ­£å»ºç«‹è¿æ¥ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š accept_mutex_delay Nms;
é»˜è®¤ï¼š accept_mutex_delay 500ms;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨accepté”åï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªworkerè¿›ç¨‹èƒ½å¤Ÿå–åˆ°accepté”ã€‚ è¿™ä¸ªaccepté”ä¸æ˜¯é˜»å¡é”ï¼Œå¦‚æœå–ä¸åˆ°ä¼šç«‹åˆ»è¿”å›ã€‚ å¦‚æœæœ‰ä¸€ä¸ªworkerè¿›ç¨‹è¯•å›¾å–accepté”è€Œæ²¡æœ‰å–åˆ°ï¼Œå®ƒè‡³å°‘è¦ç­‰accept_mutex_delayå®šä¹‰çš„æ—¶é—´é—´éš”åæ‰èƒ½å†æ¬¡è¯•å›¾å–é”ã€‚</p></div><h4 id="multi-accept" tabindex="-1"><a class="header-anchor" href="#multi-accept" aria-hidden="true">#</a> multi_accept</h4><div class="hint-container info"><p class="hint-container-title">æ‰¹é‡å»ºç«‹æ–°è¿æ¥</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š multi_accept[on|off];
é»˜è®¤ï¼š multi_accept off;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“äº‹ä»¶æ¨¡å‹é€šçŸ¥æœ‰æ–°è¿æ¥æ—¶ï¼Œå°½å¯èƒ½åœ°å¯¹æœ¬æ¬¡è°ƒåº¦ä¸­å®¢æˆ·ç«¯å‘èµ·çš„æ‰€æœ‰TCPè¯·æ±‚éƒ½å»ºç«‹è¿æ¥ã€‚</p></div><h4 id="use" tabindex="-1"><a class="header-anchor" href="#use" aria-hidden="true">#</a> use</h4><div class="hint-container info"><p class="hint-container-title">é€‰æ‹©äº‹ä»¶æ¨¡å‹</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>è¯­æ³•ï¼š use[kqueue|rtsig|epoll|/dev/poll|select|poll|eventport];
é»˜è®¤ï¼š Nginxä¼šè‡ªåŠ¨ä½¿ç”¨æœ€é€‚åˆçš„äº‹ä»¶æ¨¡å‹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºLinuxæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå¯ä¾›é€‰æ‹©çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹æœ‰pollã€selectã€epollä¸‰ç§ã€‚epollå½“ç„¶æ˜¯æ€§èƒ½æœ€é«˜çš„ä¸€ç§ï¼Œåœ¨9.6èŠ‚ä¼šè§£é‡Šepollä¸ºä»€ä¹ˆå¯ä»¥å¤„ç†å¤§å¹¶å‘è¿æ¥ã€‚</p></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/jin-shaohui/jin-shaohui/edit/main/src/Nginx/Core.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 1051131737@qq.com">shaohui_jin</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/Nginx/CommonVariables/" class="nav-link prev" aria-label="nginxå¸¸ç”¨å˜é‡"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->nginxå¸¸ç”¨å˜é‡</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><!----><div class="copyright">MIT Licensed | Copyright Â© 2019-present JSH</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-f1563afd.js" defer></script>
  </body>
</html>
